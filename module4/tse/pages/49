https://thayer.github.io/engs50/Labs/Lab6/REQUIREMENTS.html
3
16845
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>TSEQuerierRequirementsSpec</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Labs/Lab6/REQUIREMENTS.html"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">TSEQuerierRequirementsSpec</h1></header><divclass="post-content"><p>TheTSEQuerierisastandaloneprogramthatreadstheindexfileproducedbytheTSEIndexer,andpagefilesproducedbytheTSEQuerier,andanswerssearchqueriessubmittedviastdin.</p><p>Thequerier<strong>shall</strong>:</p><ol><li>executefromacommandlinewithusagesyntax<ul><li><codeclass="language-plaintexthighlighter-rouge">./querierpageDirectoryindexFilename</code></li><li>where<codeclass="language-plaintexthighlighter-rouge">pageDirectory</code>isthepathnameofadirectoryproducedbytheCrawler,and</li><li>where<codeclass="language-plaintexthighlighter-rouge">indexFilename</code>isthepathnameofafileproducedbytheIndexer.</li></ul></li><li><p>loadtheindexfrom<codeclass="language-plaintexthighlighter-rouge">indexFilename</code>intoaninternaldatastructure.</p></li><li>readsearchqueriesfromstdin,oneperline,untilEOF.<ol><li>cleanandparseeachqueryaccordingtothe<em>syntax</em>describedbelow.</li><li>ifthequerysyntaxissomehowinvalid,printanerrormessage,donotperformthequery,andpromptforthenextquery.</li><li>printthe‘clean’queryforusertosee.</li><li>usetheindextoidentifythesetofdocumentsthat<em>satisfy</em>thequery,asdescribedbelow.</li><li>ifthequeryisempty(nowords),printnothing.</li><li>ifnodocumentssatisfythequery,print<codeclass="language-plaintexthighlighter-rouge">Nodocumentsmatch.</code></li><li>otherwise,ranktheresultingsetofdocumentsaccordingtoits<em>score</em>,asdescribedbelow,andprintthesetofdocumentsindecreasingrankorder;foreach,listthescore,documentIDandURL.(ObtaintheURLbyreadingthefirstlineoftherelevantdocumentfilefromthe<codeclass="language-plaintexthighlighter-rouge">pageDirectory</code>.)</li><li>ExitwithzerostatuswhenEOFisreachedonstdin.</li></ol></li></ol><p>Thequerier<strong>shall</strong>validateitscommand-linearguments:</p><ul><li><codeclass="language-plaintexthighlighter-rouge">pageDirectory</code>isthepathnameforanexistingdirectoryproducedbytheCrawler,and</li><li><codeclass="language-plaintexthighlighter-rouge">indexFilename</code>isthepathnameofareadablefile.</li></ul><p>Thequerier<em>may</em>assumethattheinputdirectoryandfilesfollowthedesignatedformats.</p><ul><li><codeclass="language-plaintexthighlighter-rouge">pageDirectory</code>hasfilesnamed1,2,3,…,withoutgaps.</li><li>Thecontentoffilesin<codeclass="language-plaintexthighlighter-rouge">pageDirectory</code>followtheformatasdefinedinthespecs;thusyourcode(toreadthefiles)neednothaveextensiveerrorchecking.</li><li>Thecontentofthefilenamedby<codeclass="language-plaintexthighlighter-rouge">indexFilename</code>followsour<ahref="/engs50/Labs/Lab5/REQUIREMENTS.html#index-file-format">Indexfileformat</a>;thusyourcode(torecreateanindexstructurebyreadingafile)neednothaveextensiveerrorchecking.</li></ul><h2id="queries">Queries</h2><p>Thespecsaboveindicatethatyoureadonequeryperline,parsethequeryaccordingtoits<em>syntax</em>,determinewhichdocuments<em>satisfy</em>thequery,anddetermine<em>score</em>foreachdocumentsatisfyingthequery.Wedefineeachtermbelow.</p><h3id="syntax">Syntax</h3><p>Queriesareasequenceofwords,withoptionalbooleanoperators(‘and’,‘or’),where‘and’hashigherprecedencethan‘or’.</p><p>First,weignoreblanklines(i.e.,emptyornothingbutspaces).</p><p>Second,wetranslateallupper-caselettersontheinputlineintolower-case.</p><p>Then,weuse<ahref="https://en.wikipedia.org/wiki/Backus–Naur_Form">Backus-NaurForm</a>fordescribingthequerysyntax;ifyouhavenotheardofBNFbefore,you’resuretoseeitinfutureCSclasses(orsoftwarespecs!).</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>query::=&lt;andsequence&gt;[or&lt;andsequence&gt;]...andsequence::=&lt;word&gt;[[and]&lt;word&gt;]...</code></pre></div></div><p>and<codeclass="language-plaintexthighlighter-rouge">word</code>isasequenceofoneormore(lower-case)letters.</p><p>Thinkofthequeryasasequenceof<em>tokens</em>,eacha<codeclass="language-plaintexthighlighter-rouge">word</code>oraliteral(‘and’,‘or’),withspace(s)betweentokens,andoptionalspaceatthebeginningorendoftheline.Note,too,thattheliteral‘and’maybeleftoutandisthusimplicit.</p><p>Noticehowthestructureofthesyntaxindicatesthat‘and’hashigherprecedence(bindsmoretightly)than‘or’.AqueryisanOR’dsequenceofAND-sequences,orforthoseofyoufamiliarwithlogic,a<em>disjunction</em>of<em>conjunctions</em>.</p><blockquote><p>Bytheway,thisisverysimilartoanothergrammaryouknowwell:arithmetic.</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>expression::=&lt;product&gt;[+&lt;product&gt;]...product::=&lt;number&gt;[*&lt;number&gt;]...</code></pre></div></div><p>and<codeclass="language-plaintexthighlighter-rouge">number</code>isasequenceofoneormoredigits.Inanequationlike<codeclass="language-plaintexthighlighter-rouge">4+5*6</code>,theansweris<codeclass="language-plaintexthighlighter-rouge">4+(5*6)=34</code>,not<codeclass="language-plaintexthighlighter-rouge">(4+5)*6=54</code>,because<codeclass="language-plaintexthighlighter-rouge">*</code>hashigherprecedencethan<codeclass="language-plaintexthighlighter-rouge">+</code>.See<ahref="/querier/">Lecturenotes</a>.</p></blockquote><p>Single-wordexamples(allequivalent):</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>Dartmouthdartmouthdartmouth</code></pre></div></div><p>Two-wordexamples(allequivalent):</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>DartmouthCollegedartmouthcollegedartmouthandcollegedartmouthANDCollege</code></pre></div></div><p>Thefollowingtwoexamplesaredifferent:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>DartmouthCollegeANDcomputerscienceDartmouthCollegeorcomputerscience</code></pre></div></div><p>Thereisanimplicit‘and’between‘Dartmouth’and‘College’andbetween‘computer’and‘science’.(Capitalizationdoesnotmatter.)Thus,theabovetwoqueriesareequivalentto</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>DartmouthANDCollegeANDcomputerANDscienceDartmouthANDCollegeorcomputerANDscience</code></pre></div></div><p>Thefirstisasingle<codeclass="language-plaintexthighlighter-rouge">andsequence</code>(asingleconjunction);thesecondisacombinationofafirst<codeclass="language-plaintexthighlighter-rouge">andsequence</code>andasecond<codeclass="language-plaintexthighlighter-rouge">andsequence</code>-thatis,adisjunctionoftwoconjunctions.</p><p>Youcancombinewordsmorerichly,ofcourse:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>DartmouthorcomputerscienceorprogrammingorUnixorDougMcIlroy</code></pre></div></div><p>Thefollowingqueriesallhavesyntaxerrors:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>andoranddartmouthordartmouthdartmouthcollegeordartmouthcollegeanddartmouthcollegeandorcomputerdartmouthcollegeandandcomputerdartmouthcollegeorandcomputercomputerscience50Dartmouth!Backus-NaurForm</code></pre></div></div><p>because(perthesyntax)</p><ul><li>theliteral‘and’mustcomebetween<codeclass="language-plaintexthighlighter-rouge">words</code>,andtheliteral‘or’mustcomebetween<codeclass="language-plaintexthighlighter-rouge">andsequences</code>,sotheycannotappearatthebeginningorendofaquery,</li><li>theliterals(‘and’&amp;‘or’)cannotbeadjacent</li><li>charactersotherthanlettersorspacesaredisallowed.</li></ul><p>Exampleoutputfromthequerierforsomeofthequeriesabove:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>Query:dartmouthorcomputerscienceorprogrammingorunixordougmcilroyMatches7documents(ranked):score292doc7:http://old-www.cs.dartmouth.edu/~dfk/papers/index.htmlscore9doc4:http://old-www.cs.dartmouth.edu/~dfk/postdoc.htmlscore7doc6:http://old-www.cs.dartmouth.edu/~dfk/people.htmlscore6doc1:http://old-www.cs.dartmouth.edu/~dfk/index.htmlscore5doc10:http://old-www.cs.dartmouth.edu/~dfk/ChampionInternationalProfessor.htmlscore4doc9:http://old-www.cs.dartmouth.edu/score4doc5:http://old-www.cs.dartmouth.edu/~dfk/teaching.html-----------------------------------------------Query:andError:'and'cannotbefirstQuery:orError:'or'cannotbefirstQuery:anddartmouthError:'and'cannotbefirstQuery:ordartmouthError:'or'cannotbefirstQuery:dartmouthcollegeorError:'or'cannotbelastQuery:dartmouthcollegeandError:'and'cannotbelastQuery:dartmouthcollegeandorcomputerError:'and'and'or'cannotbeadjacentQuery:dartmouthcollegeandandcomputerError:'and'and'and'cannotbeadjacentQuery:dartmouthcollegeorandcomputerError:'or'and'and'cannotbeadjacentError:badcharacter'5'inquery.Error:badcharacter'!'inquery.Error:badcharacter'-'inquery.</code></pre></div></div><h3id="satisfy">Satisfy</h3><p>Adocument<em>satisfies</em>asingle-wordqueryfor<codeclass="language-plaintexthighlighter-rouge">word</code>ifthat<codeclass="language-plaintexthighlighter-rouge">word</code>appearsinthatdocument.</p><p>Adocument<em>satisfies</em>aconjunction(akaandsequence)<codeclass="language-plaintexthighlighter-rouge">wordAandwordB</code>ifboth<codeclass="language-plaintexthighlighter-rouge">wordA</code>and<codeclass="language-plaintexthighlighter-rouge">wordB</code>appearinthedocument.Byinduction,adocumentsatisfies<codeclass="language-plaintexthighlighter-rouge">&lt;andsequence&gt;andwordC</code>ifthedocumentsatisfiesthe<codeclass="language-plaintexthighlighter-rouge">andsequence</code>and<codeclass="language-plaintexthighlighter-rouge">wordC</code>alsoappearsinthedocument.</p><p>Adocument<em>satisfies</em>adisjunction<codeclass="language-plaintexthighlighter-rouge">wordAorwordB</code>ifeither<codeclass="language-plaintexthighlighter-rouge">wordA</code>and<codeclass="language-plaintexthighlighter-rouge">wordB</code>appearinthedocument.Byinduction,adocumentsatisfies<codeclass="language-plaintexthighlighter-rouge">&lt;andsequenceA&gt;or&lt;andsequenceB&gt;</code>ifthedocumentsatisfiesthe<codeclass="language-plaintexthighlighter-rouge">andsequenceB</code>orsatisfies<codeclass="language-plaintexthighlighter-rouge">andsequenceB</code>,orboth.</p><h3id="score">Score</h3><p>Becausewewanttorankthedocumentssatisfyingthequery,weneedtoscoreeachdocumentby<em>howwell</em>itsatisfiesthedocument.</p><p>Thescoreforadocumentsatisfyingasingle-wordqueryfor<codeclass="language-plaintexthighlighter-rouge">word</code>isthenumberofoccurrencesof<codeclass="language-plaintexthighlighter-rouge">word</code>inthatdocument.(Fortunately,that’swhatyourindextellsyou.)</p><p>Thescoreforadocumentsatisfyingaconjunction(aka<codeclass="language-plaintexthighlighter-rouge">andsequence</code>)<codeclass="language-plaintexthighlighter-rouge">wordAandwordB</code>isthe<em>minimum</em>ofthescorefor<codeclass="language-plaintexthighlighter-rouge">wordA</code>andthescorefor<codeclass="language-plaintexthighlighter-rouge">wordB</code>onthisdocument.Byinduction,thescoreforadocumentsatisfying<codeclass="language-plaintexthighlighter-rouge">&lt;andsequence&gt;andwordC</code>istheminimumofthescoreforthe<codeclass="language-plaintexthighlighter-rouge">andsequence</code>andthescorefor<codeclass="language-plaintexthighlighter-rouge">wordC</code>onthisdocument.</p><p>Thescoreforadocumentsatisfyingadisjunction<codeclass="language-plaintexthighlighter-rouge">wordAorwordB</code>isthe<em>sum</em>ofthescorefor<codeclass="language-plaintexthighlighter-rouge">wordA</code>andthescorefor<codeclass="language-plaintexthighlighter-rouge">wordB</code>onthisdocument.Byinduction,thescoreforadocumentsatisfying<codeclass="language-plaintexthighlighter-rouge">&lt;andsequenceA&gt;or&lt;andsequenceB&gt;</code>isthesumofthescorefor<codeclass="language-plaintexthighlighter-rouge">andsequenceA</code>andthescorefor<codeclass="language-plaintexthighlighter-rouge">andsequenceB</code>onthisdocument.</p><p>Forexample,considerthreedocuments(D1,D2,D3)andthreequeries:</p><table><thead><tr><thstyle="text-align:left">query</th><thstyle="text-align:left">D1</th><thstyle="text-align:left">D2</th><thstyle="text-align:left">D3</th></tr></thead><tbody><tr><tdstyle="text-align:left"><em>matches</em></td><tdstyle="text-align:left">0cat,5dog,7emu</td><tdstyle="text-align:left">3cat,2dog,1emu</td><tdstyle="text-align:left">3cat,4dog,0emu</td></tr><tr><tdstyle="text-align:left">catanddog</td><tdstyle="text-align:left">score=0</td><tdstyle="text-align:left">score=2</td><tdstyle="text-align:left">score=3*</td></tr><tr><tdstyle="text-align:left">catordog</td><tdstyle="text-align:left">score=5</td><tdstyle="text-align:left">score=5</td><tdstyle="text-align:left">score=7*</td></tr><tr><tdstyle="text-align:left">catanddogoremu</td><tdstyle="text-align:left">score=7*</td><tdstyle="text-align:left">score=3</td><tdstyle="text-align:left">score=3</td></tr></tbody></table><p>where*indicatesthehighestrankforeachquery.</p></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
