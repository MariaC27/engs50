https://thayer.github.io/engs50/Notes/makefiles/headerfiles.html
3
6626
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>Extra-Cheaderfiles</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Notes/makefiles/headerfiles.html"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">Extra-Cheaderfiles</h1></header><divclass="post-content"><p><strong><em>ExamplesarenotyetupdatedforCS50in17S,buttheconceptsarestillcorrect.</em></strong></p><p>Let’slookatthecontentsandpurposeof<codeclass="language-plaintexthighlighter-rouge">readline.h</code>.Thatfilewasusedintherecentexamples:</p><ul><li><ahref="/engs50/Examples/names1.c">names1.c</a>:arraysofstrings,readingandcopyinglinesintoanarray.</li><li><ahref="/engs50/Examples/names2.c">names2.c</a>:scanningastringandtruncatingitbyoverwritingacharacterwiththenull<codeclass="language-plaintexthighlighter-rouge">\0</code>character.</li></ul><p>Theseuse</p><ul><li><ahref="/engs50/Examples/readline.c">readline.c</a>:aCfiledefiningthefunction<codeclass="language-plaintexthighlighter-rouge">readline</code>,usedby<codeclass="language-plaintexthighlighter-rouge">names*.c</code>.</li><li><ahref="/engs50/Examples/readline.h">readline.h</a>:aC‘header’filethatprovidesprototypesneededbyanyCprogramwantingtouse<codeclass="language-plaintexthighlighter-rouge">readline</code>.</li></ul><p>Whydidweneedthisincludefile,<codeclass="language-plaintexthighlighter-rouge">readline.h</code>?Becausewecompiled<codeclass="language-plaintexthighlighter-rouge">names.c</code>and<codeclass="language-plaintexthighlighter-rouge">readline.c</code>separately.Whenwecompiled<codeclass="language-plaintexthighlighter-rouge">names.c</code>,weneededtodeclaretheprototypeforthefunction<codeclass="language-plaintexthighlighter-rouge">readline</code>,justaswewouldhaveif<codeclass="language-plaintexthighlighter-rouge">readline</code>hadbeendefinedwithin<codeclass="language-plaintexthighlighter-rouge">names.c</code>.Becausethefunctionwas<em>not</em>definedwithin<codeclass="language-plaintexthighlighter-rouge">names.c</code>,though,theprototypeneedstobeprefixedwith<codeclass="language-plaintexthighlighter-rouge">extern</code>,indicatingthatthefunctionisexternaltothecurrentCfile.TheCcompilerleavesthatsymbol(<codeclass="language-plaintexthighlighter-rouge">readline</code>)unresolved,andhopesthelinkerwilllaterbeabletoconnectittotheactualfunctiondefinitionwhen<codeclass="language-plaintexthighlighter-rouge">names.o</code>islinkedwithotherobjectfiles.</p><p>Wecouldhavesimplytypedtheprototypeinto<codeclass="language-plaintexthighlighter-rouge">names.c</code>,butweputitinaseparatefile<codeclass="language-plaintexthighlighter-rouge">header.h</code>,andthenusedthespecialcompilerdirective<codeclass="language-plaintexthighlighter-rouge">#include</code>toliterallycopythecontentsof<codeclass="language-plaintexthighlighter-rouge">header.h</code>intotheCfileatthatpoint.(Seethe<ahref="08x-preprocessor.html">lectureextra</a>abouttheCpreprocessor.)Justincasetheheaderfilegetsincludedmultipletimes,thepairofdirectives<codeclass="language-plaintexthighlighter-rouge">#ifndef</code>(ifnotdefined)and<codeclass="language-plaintexthighlighter-rouge">#define</code>(define)ensurethebodyofthisfileisonlyprocessedonceperCfile.</p><divclass="language-chighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="cm">/**readline.h-autilityfunctiontosafelyreadonelineofinput*Seereadline.cfordocumentation.**DavidKotz,April2016*/</span><spanclass="cp">#ifndef__READLINE_H__#define__READLINE_H__</span><spanclass="cp">#include&lt;stdbool.h&gt;</span><spanclass="k">extern</span><spanclass="n">bool</span><spanclass="nf">readline</span><spanclass="p">(</span><spanclass="kt">char</span><spanclass="o">*</span><spanclass="n">buf</span><spanclass="p">,</span><spanclass="k">const</span><spanclass="kt">int</span><spanclass="n">len</span><spanclass="p">);</span><spanclass="cp">#endif//__READLINE_H__</span></code></pre></div></div><p>Wealsoinclude<codeclass="language-plaintexthighlighter-rouge">header.h</code>in<codeclass="language-plaintexthighlighter-rouge">readline.c</code>.Thisway,wewritetheprototypeinonlyoneplace,andyetgivethecompilerinformationinbothplaceswhereitisneeded-andgivethecompilerachancetohelpuscatchanyinconsistenciesbetweentheprototypeandthefunctioncallin<codeclass="language-plaintexthighlighter-rouge">names.c</code>,orbetweentheprototypeandthefunctiondefinitionin<codeclass="language-plaintexthighlighter-rouge">readline.c</code>.</p></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
