https://thayer.github.io/engs50/Labs/Lab6/
2
26885
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>Lab6-Querier</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Labs/Lab6/"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">Lab6-Querier</h1></header><divclass="post-content"><p><strong>DueFriday,May12,at10pm</strong></p><p>Inthislabyou’llcontinuetheTinySearchEngine(TSE)bycodingtheQuerieraccordingtothe<ahref="REQUIREMENTS.html">QuerierRequirementsSpec</a>.</p><ulid="markdown-toc"><li><ahref="#preparation"id="markdown-toc-preparation">Preparation</a></li><li><ahref="#assignment"id="markdown-toc-assignment">Assignment</a><ul><li><ahref="#whatsubmit"id="markdown-toc-whatsubmit">Submission-what</a></li><li><ahref="#howsubmit"id="markdown-toc-howsubmit">Submission-how</a></li><li><ahref="#extensions"id="markdown-toc-extensions">Extensions</a></li></ul></li><li><ahref="#grading"id="markdown-toc-grading">Grading</a></li><li><ahref="#hints"id="markdown-toc-hints">Hintsandtips</a><ul><li><ahref="#review-the-lecture-notes"id="markdown-toc-review-the-lecture-notes">Reviewthelecturenotes</a></li><li><ahref="#hashtable"id="markdown-toc-hashtable">Hashtable</a></li><li><ahref="#parsing-queries"id="markdown-toc-parsing-queries">Parsingqueries</a></li><li><ahref="#combining-results"id="markdown-toc-combining-results">Combiningresults</a></li><li><ahref="#ranking-results"id="markdown-toc-ranking-results">Rankingresults</a></li><li><ahref="#testing"id="markdown-toc-testing">Testingyourquerier</a></li><li><ahref="#chopping"id="markdown-toc-chopping">Choppingastringintoarrayofstrings</a></li><li><ahref="#ctype"id="markdown-toc-ctype">ctype</a></li></ul></li></ul><h2id="preparation">Preparation</h2><ol><li><p>StartwiththesameGitlabprojectyouusedforLabs4-5.<em>Beforeyoubegin</em>,makesureyousubmittedLab5correctly:youtaggedthesubmittedversionwith<codeclass="language-plaintexthighlighter-rouge">lab5submit</code>,<ahref="/engs50/Labs/Lab5/#howsubmit">asinstructed</a>,andpushedthattagtoyourGitlabremote.</p></li><li><p>Checktoensureyourlocalrepoiscleanwith<codeclass="language-plaintexthighlighter-rouge">makeclean</code>andeverythinghasbeencommittedandpushedaccordingto<codeclass="language-plaintexthighlighter-rouge">gitstatus</code>.Ifyouhavefilesthatneedtobecommitted,orcommitsthatshouldbepushed,dothatnow.(oops-werethosesupposedtobepartofyourLab5submission?Seethefirststepabove.)</p></li><li><p><strong>Donotproceed</strong>ifyouhaveuncommittedchangesorunpushedcommits.SeekhelpifyouneedtosortoutyourrepoandGitlab.</p></li><li>Pulltheupdatedandadditionalfilesfromtheupstreammaster(theTSEstarterkit)intoyourlocalrepository:<codeclass="language-plaintexthighlighter-rouge">gitpullupstreammaster</code>(thisworksifyouearlierfollowedthe<ahref="/05/">instructionsfromSectionmeeting</a>).<blockquote><p><ahref="https://gitlab.cs.dartmouth.edu/CS50/tse/compare/341328cc0ba0501a0f53eabace60a5cdbbd5b762...HEAD">Here</a>youcanseethechangesthatwillhappenwhenyourunthiscommand-allthechangesmadetothestarterkitsinceitwasreleased.</p></blockquote></li><li><p>Commitandpushyourchanges;perhapstagthiscommitforeasyreferencelater:<codeclass="language-plaintexthighlighter-rouge">gitcommit-a;gittaglab6start;gitpush--tags</code>.</p></li><li>CheckagaintobesureyourGitlabrepois<strong><em>private</em></strong>(not<em>internal</em>or<em>public</em>).VisityourrepoonGitlab,clickon<em>Settings</em>,andscrolldownto<em>ProjectVisibility</em>.</li></ol><h2id="assignment">Assignment</h2><p>Writethe<em>querier</em>,thirdsub-systemoftheTinySearchEngine.Pleasefollowthe<ahref="/engs50/Resources/CodingStyle.html">CS50codingstyleguidelines</a>andthe<ahref="REQUIREMENTS.html">QuerierRequirementsSpec</a>,andmakegooduseofourabstractdatastructures.</p><ol><li>Inthe<codeclass="language-plaintexthighlighter-rouge">querier</code>subdirectory,write<ul><li>aprogram<codeclass="language-plaintexthighlighter-rouge">querier</code>;</li><li>a<codeclass="language-plaintexthighlighter-rouge">Makefile</code>tobuild<codeclass="language-plaintexthighlighter-rouge">querier</code>;</li><li>ashortfile<codeclass="language-plaintexthighlighter-rouge">README.md</code>toprovideanyspecialinformationaboutcompilingorusingyourquerier;</li><li>afile<codeclass="language-plaintexthighlighter-rouge">DESIGN.md</code>toprovidetheDesignSpecforquerier,drawinginspirationfromthe<ahref="/indexer/">lecturenotes</a>;</li><li>afile<codeclass="language-plaintexthighlighter-rouge">IMPLEMENTATION.md</code>toprovidetheimplementationspecandtestingplanforquerier;</li><li>afile<codeclass="language-plaintexthighlighter-rouge">TESTING.md</code>,tellingthegraderhowyoutestedyourquerier(see<ahref="#testing">abouttesting</a>below);</li><li>a<codeclass="language-plaintexthighlighter-rouge">.gitignore</code>filetellingGittoignorethebinaryfiles(libraries,executables)inthisdirectory.</li></ul></li><li>Yourprogramshallleveragecommoncodefrom<codeclass="language-plaintexthighlighter-rouge">common.a</code>inthe<codeclass="language-plaintexthighlighter-rouge">../common</code>directory:<ul><li>amodule<codeclass="language-plaintexthighlighter-rouge">index.c</code>thatcontainsallthelogicforsavingandloadingindexfiles(thismoduleiscommonbetweentheIndexer,Querier,andindextest);</li><li>amodule<codeclass="language-plaintexthighlighter-rouge">pagedir.c</code>thatcontainsallthelogicforsavingpagestoacrawleroutputdirectory,forloadingpagesfromacrawleroutputdirectory(thismoduleiscommonbetweentheCrawlerandIndexer);</li><li>(optionally)amodule<codeclass="language-plaintexthighlighter-rouge">word.c</code>thatimplements<codeclass="language-plaintexthighlighter-rouge">NormalizeWord</code>(thismoduleiscommonbetweentheIndexerandQuerier);</li><li>a<codeclass="language-plaintexthighlighter-rouge">Makefile</code>thatbuilds<codeclass="language-plaintexthighlighter-rouge">common.a</code>forusebytheprograms;</li><li>ashort<codeclass="language-plaintexthighlighter-rouge">README.md</code>fileexplaininghowtobuild<codeclass="language-plaintexthighlighter-rouge">common.a</code>;</li><li>a<codeclass="language-plaintexthighlighter-rouge">.gitignore</code>filetellingGittoignorethebinaryfiles(libraries,executables)inthisdirectory.</li></ul></li><li>Reviewyourtop-level<codeclass="language-plaintexthighlighter-rouge">README.md</code>and<codeclass="language-plaintexthighlighter-rouge">Makefile</code>toupdateasneeded.</li></ol><h3id="whatsubmit">Submission-what</h3><p>Inthislabyoushalleditoraddfilesasdescribedabove.<strong><em>Youmustarrangeyourdirectorylikeours,sowecanbetternavigateandtestyourcode.</em></strong>Ofcourse,youmayhaveadditionalfiles-testscripts,testoutput,codeyou’vechosentobreakintomultiplefiles.Hereisthesolution’s<ahref="/engs50/Labs/Lab5/tse-tree.txt">directorystructure</a>;itincludessomeoftheoptionalfilesandsomeofthetestingfiles,whichmaynotbepresentinyoursolution.Thepointisthatyourcodemustbeorganizedinthesame<em>directory</em>structure.</p><p><em>YoushallNOTmodifyanyofthecodeweprovidein<codeclass="language-plaintexthighlighter-rouge">libcs50</code></em>.</p><p><em>YoushallNOTincludeanydatafilesproducedbythecrawlerorindexer,oranybinary/objectfilesproducedbythecompiler,backupfiles,coredumps,etc.</em></p><h3id="howsubmit">Submission-how</h3><p>Whenyouarereadyforfinalsubmission,</p><ul><li><strong>Add</strong>allrequiredfilesusinganappropriate<codeclass="language-plaintexthighlighter-rouge">gitadd</code>commandline.</li><li><strong>Commit</strong>allchangesusinganappropriate<codeclass="language-plaintexthighlighter-rouge">gitcommit</code>commandline.</li><li><strong>Tag</strong>:<codeclass="language-plaintexthighlighter-rouge">gittaglab6submit</code></li><li><strong>Push</strong>:<codeclass="language-plaintexthighlighter-rouge">gitpush--tags</code>toensurethetagsarepushedtotheremote.See<ahref="/git/tags.html">moreabouttags</a>.</li></ul><p>UseyourwebbrowsertoviewyourremoteonGitlabandmakesurethereisatag<codeclass="language-plaintexthighlighter-rouge">lab6submit</code>andthefilesassociatedwiththattaggedcommitincludeeverythingwe’llneedtogradeyourlab.</p><p>Wewillcloneyourrepoat0h,24h,48h,and72haftertheoriginaldeadline.Wewillstartgradingwhenwefirstseeonewithtag<codeclass="language-plaintexthighlighter-rouge">lab6submit</code>,andjudgeitlateifthattagwasaddedafterthedeadline.Toavoidconfusion,<em>pleaseblitztheteam<codeclass="language-plaintexthighlighter-rouge">cs50ATcs.dartmouth.edu</code>ifyouwantalatesubmissiontobegradedinsteadofyouron-timesubmission.</em></p><p><strong><em>Yourentirecodebasemustcompilewith<codeclass="language-plaintexthighlighter-rouge">make</code>fromthetop-leveldirectoryandproducenocompilerwarnings.</em></strong>Ifwefindthatyourcodewillnotcompile,orhas<strong>segmentationfaults</strong>,wewillsenditbacktoyouassoonaswecanforrepair;recallthe<ahref="/#crashes">gradingpolicy</a>.</p><p>Wewillrunyourquerieronourownsetoftestdata.</p><p>Wewillrun<codeclass="language-plaintexthighlighter-rouge">valgrind</code>onyourprogramtolookformemoryleaks;youwilllosepointsformemoryleaksormemoryerrors.</p><h3id="extensions">Extensions</h3><p>Ifyouwanttoclaimyour24hextension,createafile<codeclass="language-plaintexthighlighter-rouge">EXTENSION</code>atthetop-leveldirectoryofyourrepository.Don’tforgetto<codeclass="language-plaintexthighlighter-rouge">gitpush</code><em>(beforethedeadline!)</em>sowewillseethefile.Forexample,</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nv">$</span><spanclass="nb">touch</span>EXTENSION<spanclass="nv">$</span>gitaddEXTENSION<spanclass="nv">$</span>gitcommit<spanclass="nt">-m</span><spanclass="s2">"extensionrequest"</span><spanclass="nv">$</span>gittaglab6submit<spanclass="c">#addtag,asabove</span><spanclass="nv">$</span>gitpush<spanclass="nt">--tags</span><spanclass="c">#pushtogitlab,includingtags</span></code></pre></div></div><p>UseyourwebbrowsertoviewyourremoteonGitlabandmakesurethereisatag<codeclass="language-plaintexthighlighter-rouge">lab6submit</code>andthatitsfilesinclude<codeclass="language-plaintexthighlighter-rouge">EXTENSION</code>.</p><p>Whenyouarereadytosubmityourcode,remove<codeclass="language-plaintexthighlighter-rouge">EXTENSION</code>asfollows,<em>updateyoursubmissiontag</em>,andpushtoGitlab:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nv">$</span>git<spanclass="nb">rm</span>EXTENSION<spanclass="nv">$</span>gitcommit<spanclass="nt">-m</span><spanclass="s2">"readyforgrading"</span><spanclass="nv">$</span>gitpush<spanclass="nt">--delete</span>originlab6submit<spanclass="c">#removethetagfromremote</span><spanclass="nv">$</span>gittag<spanclass="nt">-f</span>lab6submit<spanclass="c">#movethelocaltagforwardtothiscommit</span><spanclass="nv">$</span>gitpush<spanclass="nt">--tags</span><spanclass="c">#pushtogitlabremote,includingtags</span></code></pre></div></div><p>UseyourwebbrowsertoviewyourremoteonGitlabandmakesurethereisatag<codeclass="language-plaintexthighlighter-rouge">lab6submit</code>,thatitsfilesdo<em>not</em>include<codeclass="language-plaintexthighlighter-rouge">EXTENSION</code>,anditsfilesincludeeverythingwe’llneedtogradeyourlab.</p><h2id="grading">Grading</h2><p>Lab6isscoredonthebasisof100points,withDelivery,Documentation,Style,Testingcomprisingmostofthepoints.</p><p>“Functionality”represents40/100points.Inrecognitionthatyoumightfinditbesttostartsimpleandslowlyenhanceyoursolutionasyougetthesimplerversionworking,youcanearnpointsasfollows:</p><ul><li>10pointsifyourquerierprintsthesetofdocumentsthatcontainallthewordsinthequery;youmaytreatoperators(‘and’,‘or’)asregularwords.</li><li>20pointsifyourquerieralsosupports‘and’and‘or’operators,butwithoutprecedence(inmathematicalterms,ittreatsthemas<em>leftassociative,equalprecedence</em>operators).</li><li>30pointsifyourquerieralsosupports‘and’precedenceover‘or’.</li><li>40pointsifyourquerieralsoprintsthedocumentsetindecreasingorderbyscore,thusmeetingthefullspecs.</li></ul><p>Partialcreditisavailable,ofcourse,perthejudgementofthegrader,butaboveisthecoarse-grainrubric.</p><h2id="hints">Hintsandtips</h2><p>Processingaqueryandrankingtheresultsaretricky.Weencourageyoutostartwithasimplifiedcase,testitthoroughly,thenenhance.Easiertocode,totest,andtodebug,andwhenfacingadeadlineit’snicetohavealess-functionalprogramthatworksthanafull-functionalprogramthatdoesn’twork.Seetheabovesectionon<ahref="#grading">Grading</a>regardingthepointsallocatedasyouachievehigherlevelsoffunctionality.</p><h3id="review-the-lecture-notes">Reviewthelecturenotes</h3><p>Therearesomeexamplesanddesigntipsinthe<ahref="/querier/">lecturenotes</a>.</p><h3id="hashtable">Hashtable</h3><p>Howbigshouldyourhashtablebe?Well,youcanknowhowmanywordsitwillstore-becausetheindexfilehasonewordperline,andyoucancountthenumberoflinesintheindexfilebeforecreatinganindexdatastructureandbeforeloadingthefileintothestructure.Justthinkabouthowthehash-tablesize(inslots)mightrelatetothenumberofwordsitwillneedtostore.</p><h3id="parsing-queries">Parsingqueries</h3><p>Westronglyrecommendthatyourcodereadtheentirequery(alineofinput)intoasinglestring,then<em>tokenize</em>thequerystring.Thatis,youshouldwriteafunctionthattakesastringandbuildsanarrayofwords;itshouldusewhitespace(spaceortab)asthedelimiter;eachwordcanbenormalized(lower-cased)andcheckedforillegalcharactersbeforebeingaddedtothearray.See<ahref="#chopping">oneapproach</a>atbottom.</p><p>Nowthatallthecharacter-by-characterparsingisbehindyou,andyouhaveanarrayofwords,youcanstepthroughthearraytoprinta<em>cleanquery</em>,thatis,withnoextraneousspacesandalllettersinlowercase.</p><p>YoucanthenstepthroughthearrayaccordingtothestructuredefinedintheBNF.Twotips:</p><ul><li>Validatethebasicstructure:neitherthefirstorlastwordmaybeanoperator,andtwooperatorsmaynotbeadjacent.Ifvalid,proceedtonextstep;otherwiseprintasuitableerrormessage.</li><li>Structureyourcodetofollowthestructureofthegrammar,whichhastwonon-terminals(<codeclass="language-plaintexthighlighter-rouge">query</code>and<codeclass="language-plaintexthighlighter-rouge">andsequence</code>),towriteafunctionthathandleseach.<ul><li>Onefunctiontoreturnsetofdocumentsthatsatisfyan<codeclass="language-plaintexthighlighter-rouge">andsequence</code>,loopingoverwords;accumulateananswer(likearunningproduct)asyougo.</li><li>Anotherfunctiontoreturnsetofdocumentsthatsatisfya<codeclass="language-plaintexthighlighter-rouge">query</code>,loopingovercallstotheabovefunctionforeach<codeclass="language-plaintexthighlighter-rouge">andsequence</code>;accumulateananswer(likearunningtotal)asyougo.</li></ul></li></ul><blockquote><p>See<ahref="/querier/index.html#expressions">Lecturenotes</a>formorehintsabouthowthismightwork.</p></blockquote><h3id="combining-results">Combiningresults</h3><p>Supposeyouhaveone<codeclass="language-plaintexthighlighter-rouge">counters</code>objectrepresentingthesetofdocumentsinwhichagivenwordappears,andanother<codeclass="language-plaintexthighlighter-rouge">counters</code>objectrepresentingthesetofdocumentsinwhichanotherwordappears;eachcountersetisreallyasetof(docID,count)pairs.Howdoyoucombinethem?Recall<ahref="/iterators/">Lecture</a>.</p><p>Ifyouareprocessing<codeclass="language-plaintexthighlighter-rouge">wordAANDwordB</code>,thesetofdocumentsthatmatch<em>both</em>wordsisthe<em>intersection</em>ofthetwosets,andthescoreforeachdocument(perthespecs)isthe<em>minimum</em>ofthecountforeachdocument.Soyouneedawaytointersecttwo<codeclass="language-plaintexthighlighter-rouge">counters</code>;werecommenditeratingoveronesetand,foreachitem,checkingwhetherthatdocumentexistsintheotherset;updatethefirstsetaccordingtowhatyoufind.Youcanuse<codeclass="language-plaintexthighlighter-rouge">counters_iterate</code>,<codeclass="language-plaintexthighlighter-rouge">counters_get</code>,and<codeclass="language-plaintexthighlighter-rouge">counters_set</code>todothis,withoutmodifyingyour<codeclass="language-plaintexthighlighter-rouge">counters</code>module.</p><p>Ifyouareprocessing<codeclass="language-plaintexthighlighter-rouge">wordAORwordB</code>,thesetofdocumentsthatmatch<em>either</em>wordisthe<em>union</em>ofthetwosets,andthescoreforeachdocument(perthedefinitionabove)isthe<em>sum</em>ofthecountforeachdocument.Soyouneedawaytouniontwo<codeclass="language-plaintexthighlighter-rouge">counters</code>;werecommenditeratingoverthesecondsetand,foreachitem,checkingwhetherthatdocumentexistsinthefirstset;updatethefirstsetaccordingtowhatyoufind.Again,youcanuse<codeclass="language-plaintexthighlighter-rouge">counters_iterate</code>,<codeclass="language-plaintexthighlighter-rouge">counters_get</code>,and<codeclass="language-plaintexthighlighter-rouge">counters_set</code>todothis,withoutmodifyingyour<codeclass="language-plaintexthighlighter-rouge">counters</code>module.</p><p>Whileprocessingan<codeclass="language-plaintexthighlighter-rouge">andsequence</code>youcancomputea‘runningproduct’,thatis,a<codeclass="language-plaintexthighlighter-rouge">counters</code>objectthatrepresentstheintersectionofeverythingseensofarinthesequence.</p><p>Whenprocessingaquery,thatis,adisjunctionof<codeclass="language-plaintexthighlighter-rouge">andsequence</code>results,youcansimilarlycomputea‘runningsum’,thatis,a<codeclass="language-plaintexthighlighter-rouge">counters</code>objectthatrepresentstheunionofeverythingseensofarinthesequence.</p><h3id="ranking-results">Rankingresults</h3><p>Afterparsingandinterpretingaquery,youwilllikelyhavea<codeclass="language-plaintexthighlighter-rouge">counters</code>objectrepresentingthescoreforeachsatisfyingdocument.The<codeclass="language-plaintexthighlighter-rouge">counters</code>moduledoesnothavea‘sort’methodorawaytoiterateovertheitemsinsortedorder.Wesuggestyouuse<codeclass="language-plaintexthighlighter-rouge">counters_iterate()</code>inwhichthe<codeclass="language-plaintexthighlighter-rouge">itemfunc</code>insertstheitemsintoanewarrayofstructs,eachstructrepresentingonesatisfyingdocument(docID,score).Use<codeclass="language-plaintexthighlighter-rouge">counters_iterate</code>twice-oncetocountthenumberofitemsinthesetsoyoucanallocateanappropriate-sizedarray,andagaintostuffeachitemintothenewarray.Ifyour<codeclass="language-plaintexthighlighter-rouge">itemfunc</code>usesaninsertion-sortapproachtodropthenewitemintothearraysothearrayissortedindecreasing-scoreorder,youendtheiterationwithanicelysortedarrayofstructs.Thenyoucansimplyloopoverthearraytoprintoutthelistofdocuments.</p><h3id="testing">Testingyourquerier</h3><p>Yourquerierreadsqueriesfromstdin,oneperline.Youcantestitinteractively,buttodothoroughandrepeatedtestingyoucanwriteacollectionoflittlefiles,eachofwhichcontainsoneormorequeriestoyourquerier,andruncommandslike<codeclass="language-plaintexthighlighter-rouge">./querier&lt;testquery</code>.Youmightwriteashortbashscripttorunthequerierthroughseveralsuchtestfiles.Thatscriptmightevencomparetheoutputtoknown-goodoutput,forregressiontesting.</p><p>Youarewelcome(butnotrequired)tousethe<codeclass="language-plaintexthighlighter-rouge">fuzzquery.c</code>,providedintheupdatedstarterkit,fortestingyourquerier.Again,youmightwriteashortbashscriptand/orMakefilerulestohelpyouruntestsusingthisprogram.<em>Ifyouchoosetousethisprogram,youwillneedtochangethe<codeclass="language-plaintexthighlighter-rouge">-std</code>switchinthe<codeclass="language-plaintexthighlighter-rouge">CFLAGS</code>definitioninyour<codeclass="language-plaintexthighlighter-rouge">Makefile</code>asfollows</em></p><divclass="language-makehighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nv">CFLAGS</span><spanclass="o">=</span><spanclass="nt">-Wall</span><spanclass="nt">-pedantic</span><spanclass="nt">-std</span><spanclass="o">=</span>gnu11<spanclass="nt">-ggdb</span><spanclass="nv">$(FLAGS)</span><spanclass="nt">-I</span><spanclass="nv">$C</span><spanclass="nt">-I</span><spanclass="nv">$L</span></code></pre></div></div><p>Ifyourindexerneverquiteworked,neverfear.Youdonotneedaworkingindexertowriteortestyourquerier.Tryyourquerierontheindexer’soutput,in<codeclass="language-plaintexthighlighter-rouge">~cs50/data/tse-output/</code>.</p><h3id="chopping">Choppingastringintoarrayofstrings</h3><p>Here’sanicetrickforbreakingasinglestring<codeclass="language-plaintexthighlighter-rouge">char*line</code>intoanarrayofstrings<codeclass="language-plaintexthighlighter-rouge">char*words[]</code>.Intheexamplebelow,thequeryhastwowords,andthereareleadingspaces,separatingspaces,andtrailingspace,terminatedbyanull.BecauseinCa“string”isjustapointertoanarrayofcharactersterminatedbyanull<codeclass="language-plaintexthighlighter-rouge">\0</code>character,wecanchopthissinglestringintomultiplestringsbyreplacingtwoofthespaceswithnulls,andrecordingapointertothebeginningofeachword.Wedon’tneedtoallocateanymemoryforthesenewstrings,orcopythesestrings-theystayrightwheretheyare.</p><p><imgsrc="/engs50/Labs/Lab6/query-chopping.png"alt="diagramofChoppingastringintoarrayofstrings"/></p><p>Tomakethishappen,thinkaboutslidingtwopointersalongthearray,startingat<codeclass="language-plaintexthighlighter-rouge">line</code>.Onepointermightbe<codeclass="language-plaintexthighlighter-rouge">char*word</code>andyouslideitovertothefirstnon-space;theotherpointermightbe<codeclass="language-plaintexthighlighter-rouge">char*rest</code>andyouslideitfrom<codeclass="language-plaintexthighlighter-rouge">word</code>tothefirstnon-letter.Squashthatcharacter<codeclass="language-plaintexthighlighter-rouge">*rest</code>withanull,andyou’vecreatedanull-terminatedstringstartingat<codeclass="language-plaintexthighlighter-rouge">word</code>.</p><p><em>Thinkcarefully</em>abouttheedgecases,asyouconstructtheloopsandslidethepointers.</p><h3id="ctype">ctype</h3><p>Youmayfindthefunctions<codeclass="language-plaintexthighlighter-rouge">isalpha()</code>and<codeclass="language-plaintexthighlighter-rouge">isspace()</code>useful;readthemanpage.Theyarefromthe<codeclass="language-plaintexthighlighter-rouge">ctype.h</code>package.</p></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
