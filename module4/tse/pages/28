https://thayer.github.io/engs50/Notes/search/
2
18200
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>SearchingTheWeb</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Notes/search/"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">SearchingTheWeb</h1></header><divclass="post-content"><p>InthenextseriesofLabswewilldesign,implementandtestacommand-lineweb-searchtoolcalledTinySearchEngine(TSE)becauseitcanbewritteninunder<strong>2000</strong>linesofstudent-writtenCcode(about500linesineachoffourLabs3-6).Todaywebegintodiscusstheconceptsbehindwebsearchandthetop-leveldesignofTSEanditsdecompositionintothreemajorcomponents:crawler,indexer,andquery.</p><p>Inthislecture,wediscusssomeofthefoundationalissuesassociatedwithsearchingtheweb.WealsodicusstheoverallarchitecturaldesignofamorecomprehensivesearchenginethanTSE.</p><p>Youshouldskimthisclassicpaperaboutawebsearchengine:</p><blockquote><p><em><ahref="/engs50/Reading/searchingtheweb.pdf">SearchingtheWeb</a>,</em>ArvindArasu,JunghooCho,HectorGarcia-Molina,AndreasPaepcke,SriramRaghavan(StanfordUniversity).ACMTransactionsonInternetTechnology(TOIT),Volume1,Issue1(August2001).</p></blockquote><p>Thispapergivesinsightsintosearch-enginedesign.Youcanskiptheplotsanddeeperresearchmaterial,butdoyourbesttounderstandthetextonthemaincomponentsanddesignissuesofasearchengine.</p><h3id="goals">Goals</h3><p>Weplantolearnthefollowingfromtoday’slecture:</p><ul><li>HowdoessearchenginelikeGooglesearchtheweb?</li><li>Ageneralsearch-enginearchitecture.</li><li>URLs,webpages,HTML,HTTP,andkeywords.</li><li>‘Talking’totheCSdepartmentwebserverusingHTTP.</li></ul><!--Here'smyTerminal[script](/engs50/Notes/search/script.txt)fortoday.--><h3id="searching-the-web">SearchingtheWeb</h3><p>HowdoyougetinformationfromtheWeb?Searchingthewebissomethingwedoeverydaywithease,butit’stechnicallychallengingtoimplementbecauseofthescaleofthewebandbecausepageschangeatdramaticallydifferentrates.AsofApril12,2014therewere<strong>1.79billion</strong>publiclyavailablewebpagesonthe“indexedweb”accordingto<ahref="http://www.worldwidewebsize.com">oneestimate</a>.IjustlookedatthatwebsiteonApril17,2018:thesitesaystheindexedwebnowcontainsatleast<strong>4.86billionpages!</strong>Eventhatnumberlikelytobeanunderestimate,becausemanyorganizationshavelotsofinternalwebpagesthataren’tindexedbythepublicsearchengines.</p><p>TogetinformationabouthikinginNewHampshire,Icanuseasearchengine(suchasGoogle)asaninformationretrievalsystem;itreturnsalistoflinks(URLs)tositesthathavethekeywordsIspecifiedembeddedinthem.Conveniently,thesearchengineorders(ranks)thelinkssothemost-relevantpagesarenearthetopofthelist.</p><p><imgsrc="/engs50/Notes/search/hikenh.png"alt="Googlesearchfor*hiking&quot;newhampshire&quot;*"/></p><hr/><p>Googlerespondedtomyqueryin0.52secondswith8,960,000matchesfound!Howisthatpossible?HowdoesGooglesearchmorethan4billionwebpagesinhalfofasecond?Surely,Googledoesnotactuallysearchthosepagesforeachuser’srequest.Instead,itlooksintoavast‘index’oftheweb,builtearlier.Givenanewsearchterm,itcheckstheindexforpagesknowntohavetheword“hiking”,andagainforthosewiththephrase“newhampshire”,andthenintersectsthetworesultstocomeupwithalist.</p><p>HowdoesGooglerankthepagesintheresultinglist?ThesolutionisactuallyGoogle’s‘secretsauce’,the“page-rankalgorithm”developedbyBrinandPagewhentheyweregradstudents.(Althoughtheoriginalalgorithmwaspublished,Googlecontinuestorefineandtweakitandkeepsthedetailssecret.)</p><p>WhenandhowdoesGooglebuildthatindex?Andhowdoesitfindallthepagesontheweb?Google’sserversareconstantly“crawling”theweb:givenonelink(URL),downloadthatpage,findallthelinksinthatpage,andthengoexaminethosepages-recursively.Asnew(orupdated)pagesarefound,they“index”eachpagebyextractingthelistofwordsusedonthatpage,andthenbuildingadatastructurethatmapsfrom<em>words</em>to<em>URLs</em>.</p><p>Later,asearchqueryisbrokenintowords,andeachwordissoughtintheindex,returningasetofURLswherethatwordappears.Foramulti-wordquery,theyintersectthesetstofindasetwhereallwordsappear.Thentheyapplythepage-rankalgorithmtothesettoproducearankedlist.</p><p>InApril2014,Google’swebsitesaiditsindexfilledover100milliongigabytes!<strong>Checkoutthis<ahref="https://www.google.com/insidesearch/howsearchworks/crawling-indexing.html">nicevideo</a>fromGoogleexplaininghowsearchengineworks.</strong></p><h3id="general-search-engine-architecture-arvind-2001">Generalsearchenginearchitecture[Arvind,2001]</h3><p>SearchengineslikeGooglearecomplex,sophisticated,highlydistributedsystems.Belowwereproducethegeneralsearchenginearchitecturediscussedin<em><ahref="/engs50/Reading/searchingtheweb.pdf">SearchingtheWeb</a>.</em></p><p><imgsrc="searchenginearchitecture.png"alt="Generalsearchenginearchitecture[Arvind,2001]"title="Generalsearchenginearchitecture[Arvind,2001]"/></p><hr/><p>Themaincomponentsincludeparallelcrawlers,crawlercontrol(whenandwheretocrawl),pagerepository,indexer,analysis,collectionofdatastructures(indextables,structure,utility),andaqueryengineandrankingmodule.Suchageneralarchitecturewouldtakeasignificantamountoftimetocode.InourTSE,wewillimplementastrippeddownversionofthemaincomponents.</p><h3id="urls-html-and-keywords">URLs,HTML,andkeywords</h3><p>Someterminology:</p><ul><li><strong>URL</strong>,shortfor<em>UniformResourceLocator</em>,isusedtospecifyaddressesofwebpagesandotherresourcesontheweb.Anexampleis<codeclass="language-plaintexthighlighter-rouge">http://www.dartmouth.edu/index.html</code>,whichreferstothe<codeclass="language-plaintexthighlighter-rouge">HTTP</code>networkprotocol,the<codeclass="language-plaintexthighlighter-rouge">www.dartmouth.edu</code>server,andthe<codeclass="language-plaintexthighlighter-rouge">index.html</code>fileonthatserver.</li><li><strong>HTML</strong>.MostwebpagesarewritteninHyperTextMarkupLanguage(HTML).ForaquicktutorialonHTMLseethis<em><ahref="http://www.w3schools.com/html/html_intro.asp">IntroductiontoHTML</a></em>.AnHTMLfileisatextfilewithan<codeclass="language-plaintexthighlighter-rouge">htm</code>or<codeclass="language-plaintexthighlighter-rouge">html</code>fileextension.HTMLpagescanbecreatedbytoolsorsimplyinaneditorlikeemacs.YouwillnotneedtowriteanyHTMLforthiscourse.</li><li><strong>tags</strong>.HTMLuses“tags”tomark-upthetext;forexample<codeclass="language-plaintexthighlighter-rouge">&lt;b&gt;thistextwouldbebold&lt;/b&gt;</code>.Mosttagsareenclosedinanglebrackets,like<codeclass="language-plaintexthighlighter-rouge">&lt;b&gt;</code>,andmostcomeinmatchingpairsmarkingthebeginningandendingofaregionoftexttowhichthetagapplies;notethe<codeclass="language-plaintexthighlighter-rouge">&lt;b&gt;</code>and<codeclass="language-plaintexthighlighter-rouge">&lt;/b&gt;</code>pair.</li></ul><p>WeareinterestedcollectingURLsfromHTMLfiles.TheHTMLtagthatformsalinkandreferencesaURLiscalledan‘anchor’,or‘a’forshort.Thetag<codeclass="language-plaintexthighlighter-rouge">&lt;a&gt;</code>takesparameters,mostimportantlythe<codeclass="language-plaintexthighlighter-rouge">href</code>parameter:</p><divclass="language-htmlhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nt">&lt;a</span><spanclass="na">href=</span><spanclass="s">"http://www.dartmouth.edu/index.html"</span><spanclass="nt">&gt;</span>Dartmouthhomepage<spanclass="nt">&lt;/a&gt;</span></code></pre></div></div><p>Forthepurposeofindexingthepage,weneedtofindthe‘words’inthepage.Inmostwebpages,mostofthecontentisoutsidethetagsbecausethetagsaretheretoformatthecontent.<strong>ForTinySearchEngine,wedefinekeywordsasbeingoutsideoftags.</strong></p><p>SowhenTinySearchEnginedownloadsawebpageofHTMLsourceitneedstoparsethepagetoextractURLs(soitcancrawlthoseURLs)andidentifythewordsthatusersmightbeinterestedinrunningqueriesfor.</p><p>ParsingHTMLcanbechallenging,especiallybecausesomanypagesonthewebdon’tfollowtheHTMLstandardcleanly.WewillprovideyouwithaCfunctiontoparsetheHTML.(Feelfreetowriteyourownifyouprefer).</p><p>FormoreinformationaboutHTMLcheckouttheold<ahref="http://www.w3.org/TR/REC-html40/about.html">HTML4specification</a>orthebrandnew<ahref="http://www.w3.org/TR/html5/">HTML5specification</a>.</p><h3id="talk-to-a-webserver-using-hypertext-transfer-protocol-http">TalktoawebserverusingHyperTextTransferProtocol(HTTP)</h3><p>The<ahref="http://www.w3.org/Protocols/">HyperTextTransferProtocol(HTTP)</a>isusedbetweenyourclientbrowserandtheservertotransferHTMLfiles.HTTPitselfisaverysimple,stateless,request/responseprotocolthatgetitsreliableunderlyingtransportfromTCP(TransmissionControlProtocol)ontopofIP(InternetProtocol).(GotakeCS60tolearnmoreaboutnetworking!)</p><p>ThebasicHTTPprotocolisthattheclientsendsarequestcalleda<codeclass="language-plaintexthighlighter-rouge">GET</code>andtheserverrespondswitharesponse.Webservers‘listen’forrequestsonthewell-knownTCPport80.</p><p>Wehavetofirstconnecttotheserverandopenupareliablestreamtohost<codeclass="language-plaintexthighlighter-rouge">www.cs.dartmouth.edu</code>atport80.Wecouldwritesomefancycodetodothis,but(intypicalUnixstyle)thereisalreadyatoolwecanuse:<codeclass="language-plaintexthighlighter-rouge">telnet</code>,aprogramthatsimplymakesaTCP/IPconnectiontoagivenhostandport,andconnectsourterminal’skeyboardandscreentothatconnectionsowecaninteractivelywritetotheremoteserverlisteningatthatport.</p><p>WecanthustypeanHTTP<codeclass="language-plaintexthighlighter-rouge">GET</code>requestbyhand:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>[cs50@flume~]$telnetwww.cs.dartmouth.edu80Trying129.170.213.101...Connectedtowww.cs.dartmouth.edu.Escapecharacteris'^]'.GET/~cs50/index.htmlHTTP/1.1&lt;==ItypedthisHOST:www.cs.dartmouth.edu&lt;==andthis&lt;==andablanklineHTTP/1.1200OKDate:Wed,19Apr201716:22:32GMTServer:Apache/2.4.23(Fedora)Last-Modified:Wed,19Apr201714:57:28GMTETag:"c50-54d863e326600"Accept-Ranges:bytesContent-Length:3152Connection:closeContent-Type:text/html;charset=UTF-8&lt;!DOCTYPEhtml&gt;&lt;html&gt;&lt;head&gt;&lt;metacharset="utf-8"&gt;&lt;metahttp-equiv="X-UA-Compatible"content="IE=edge"&gt;&lt;metaname="viewport"content="width=device-width,initial-scale=1"&gt;&lt;title&gt;CS50Overview&lt;/title&gt;&lt;metaname="description"content="InComputerScience50youwilllearnhowtodesign&amp;buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools....</code></pre></div></div><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>[&lt;ahref="https://canvas.dartmouth.edu/courses/14815"&gt;Canvas&lt;/a&gt;][&lt;ahref="https://piazza.com/dartmouth/spring2017/cosc050sp17/home"&gt;Piazza&lt;/a&gt;][&lt;ahref="/~cs50/Schedule.pdf"&gt;Schedule&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/Logistics/"&gt;Logistics&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/Lectures/"&gt;Lectures&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/Reading/"&gt;Reading&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/examples/"&gt;Examples&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/Sections/"&gt;Sections&lt;/a&gt;][&lt;ahref="http://www.cs.dartmouth.edu/~cs50/Labs/"&gt;Labs&lt;/a&gt;]...</code></pre></div></div><p>Tryityourself!Makesureyouhitcarriagereturntwiceaftertypingin<codeclass="language-plaintexthighlighter-rouge">HOST:www.cs.dartmouth.edu</code>sincetheHTTPprotocolwantsanemptylinetoindicatethatyou’refinished.</p><p>ThewebserverrespondswithafewlinesofHTTPsyntax;thefirstlinereportsstatuscode<codeclass="language-plaintexthighlighter-rouge">200</code>withhuman-readableequivalent<codeclass="language-plaintexthighlighter-rouge">OK</code>.Thenextfewlinesprovidethedate,theserverversion,thelast-modifieddateforthefilereturned,andsomeotherstuffdescribingthecontentasHTML.Afterablankline,thecontentsofthefilewerequested(theCS50homepage).Isnippedoutmostofit,butyoucanseetheanchortagsthatappearatthetopofeveryCS50page.NoticetheURLsforCanvas,Piazza,andlinkstootherfoldersandfileswithinthe<codeclass="language-plaintexthighlighter-rouge">~cs50</code>folder.</p><p>Youhappentohaveaccesstothefilesusedbythiswebserver!ThisserverisconfiguredtorewriteURLsoftheform<codeclass="language-plaintexthighlighter-rouge">/~user/...</code>topathnamesoftheform<codeclass="language-plaintexthighlighter-rouge">~user/public_html/...</code>.Soifyousshto<codeclass="language-plaintexthighlighter-rouge">flume</code>oranyoftheCS50Unixmachinesyoucan<codeclass="language-plaintexthighlighter-rouge">cd~cs50/public_html/</code>andpokearoundattheHTMLfilesthere.</p><p>Mostwebpageswillincludemanylinks,andsometimeswillincludethesamelinktwice.Furthermore,whenexploringasetofwebpages,thosewebpagesoftenlinktoeachother(forexample,alltheCS50pageslinktotheCS50‘home’,andthatpagelinksdirectlyorindirectlytoallofthosepages).</p><p>Thewebisa“directedgraph”,notatree.Anyeffortto‘crawl’theweb,therefore,mustusesomethinglikebreadth-firstordepth-firstsearchtoexplorethegraph,avoidingtheeffort(andinfiniteloops!)thatoccurwhenencounteringalinkalreadyfoundearlierinthecrawl.</p><p>InourTinySearchEnginewewillrelyon<codeclass="language-plaintexthighlighter-rouge">curl</code>(andthe<codeclass="language-plaintexthighlighter-rouge">libcurl</code>library)toretrievewebpages.</p><p>Wecanexperimentabitusingthecommand-lineversionof<codeclass="language-plaintexthighlighter-rouge">curl</code>.Let’suse<codeclass="language-plaintexthighlighter-rouge">curl</code>todownloadtheCS50homepagecountthenumberofURLs.Acrudeapproachwouldbetopipetheoutputof<codeclass="language-plaintexthighlighter-rouge">curl</code>(i.e.,theHTMLfromthewebpage)into<codeclass="language-plaintexthighlighter-rouge">grep</code>andthencountthelines.(Thisapproachwillunder-countiftherearemultiple<codeclass="language-plaintexthighlighter-rouge">href</code>linksonthesameline.)Thereareatleast17linksonthatpage.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>cs50@flume~]<spanclass="nv">$</span>curl<spanclass="nt">-s</span>http://www.cs.dartmouth.edu/~cs50/|<spanclass="nb">grep</span><spanclass="nt">-i</span>href|<spanclass="nb">wc</span><spanclass="nt">-l</span>17</code></pre></div></div><h2id="activity">Activity</h2><p>Intoday’s<ahref="activity.html">activity</a>yourgroupwillstartenvisioningadesignfortheTSECrawler.</p></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
