https://thayer.github.io/engs50/Labs/Lab3/array-allocate.html
3
6209
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>Allocatinganarraywithcalloc</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Labs/Lab3/array-allocate.html"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">Allocatinganarraywithcalloc</h1></header><divclass="post-content"><p>We’veseentheuseofaone-dimensionalarrayofpointerstostrings,in<ahref="/engs50/Examples/names3.c">names3.c</a>.Inthatcase,thenumberofslotsinthearraywasaconstant.Whatifwedon’tknowthatnumberatcompiletime?</p><p>Here’sasnippetofcodetohintathowtoallocateanarrayof<codeclass="language-plaintexthighlighter-rouge">num</code>slots:</p><divclass="language-chighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="c1">//thenumberofelementsinthearray</span><spanclass="kt">int</span><spanclass="n">num</span><spanclass="o">=</span><spanclass="p">...;</span><spanclass="c1">//somehowobtained;belowweassumenum&gt;=2</span><spanclass="p">...</span><spanclass="c1">//arrayofints</span><spanclass="kt">int</span><spanclass="o">*</span><spanclass="n">array</span><spanclass="o">=</span><spanclass="n">calloc</span><spanclass="p">(</span><spanclass="n">num</span><spanclass="p">,</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="kt">int</span><spanclass="p">));</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">=</span><spanclass="mi">42</span><spanclass="p">;</span><spanclass="c1">//arrayofpointerstoint</span><spanclass="kt">int</span><spanclass="o">**</span><spanclass="n">array</span><spanclass="o">=</span><spanclass="n">calloc</span><spanclass="p">(</span><spanclass="n">num</span><spanclass="p">,</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="kt">int</span><spanclass="o">*</span><spanclass="p">));</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">=</span><spanclass="n">malloc</span><spanclass="p">(</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="kt">int</span><spanclass="p">));</span><spanclass="o">*</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">=</span><spanclass="mi">42</span><spanclass="p">;</span><spanclass="c1">//forothertypes,theprocessisanalogous</span><spanclass="k">struct</span><spanclass="n">foo</span><spanclass="o">**</span><spanclass="n">array</span><spanclass="o">=</span><spanclass="n">calloc</span><spanclass="p">(</span><spanclass="n">num</span><spanclass="p">,</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="k">struct</span><spanclass="n">foo</span><spanclass="o">*</span><spanclass="p">);</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">=</span><spanclass="n">malloc</span><spanclass="p">(</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="k">struct</span><spanclass="n">foo</span><spanclass="p">));</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">-&gt;</span><spanclass="n">foomember</span><spanclass="o">=</span><spanclass="mi">42</span><spanclass="p">;</span><spanclass="c1">//assumingfoomemberisanintegermemberofstructfoo</span><spanclass="c1">//or,sometimes,youdon'tknowhowtoinitializethestructure</span><spanclass="c1">//becauseitprovidesa'constructor'function.firststepisthesame:</span><spanclass="k">struct</span><spanclass="n">foo</span><spanclass="o">**</span><spanclass="n">array</span><spanclass="o">=</span><spanclass="n">calloc</span><spanclass="p">(</span><spanclass="n">num</span><spanclass="p">,</span><spanclass="k">sizeof</span><spanclass="p">(</span><spanclass="k">struct</span><spanclass="n">foo</span><spanclass="o">*</span><spanclass="p">);</span><spanclass="n">array</span><spanclass="p">[</span><spanclass="mi">1</span><spanclass="p">]</span><spanclass="o">=</span><spanclass="n">foo_new</span><spanclass="p">(</span><spanclass="mi">42</span><spanclass="p">);</span><spanclass="c1">//lettheconstructorallocateandinitializeanewfoo.</span></code></pre></div></div></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
