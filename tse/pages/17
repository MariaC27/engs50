https://thayer.github.io/engs50/Notes/bash1/
2
44883
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>IntroductiontoBash</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Notes/bash1/"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">IntroductiontoBash</h1></header><divclass="post-content"><p>Don’tforgetthisweek’s<ahref="/engs50/Reading/#week-1">reading</a>.</p><p>Inthisnote,wediscusstheUnixshellanditscommands.The‘shell’isa<em>command-lineinterpreter</em>andinvokeskernel-levelcommands.Italsocanbeusedasa<em>programminglanguage</em>todesignyourowncommands.We’llcometoshellprogramminginafuturenote.</p><p>WedonotrecommendthatyoubuyabookaboutUnixortheshell;therearesomeverygoodreferencesandfree-accessonlinebooks–seethe<ahref="/engs50/Resources">resourcespage</a>–andwehaveselectedsomeinterestinganduseful<ahref="/engs50/Reading">readings</a>.</p><p>IfyouneedhelponthemeaningorsyntaxofanyUnixshellcommandyoucanusethemanual(man)pagesonaUnixsystem(seebelow)orthe<ahref="http://www.computerhope.com/unix.htm#04">webunixcommands</a>.Justkeepinmindthatsomecommands’syntaxvariesabitacrossUnixflavors,sowhenindoubt,checkthemanpageonthesystemyou’reusing.</p><h2id="unix-philosophy">UnixPhilosophy</h2><p>Intheirbook<em>ProgramDesignintheUnixEnvironment</em>(1984),RobPikeandBrianKernighanputitthisway:</p><blockquote><p>``MuchofthepoweroftheUnixoperatingsystemcomesfromastyleofprogramdesignthatmakesprogramseasytouseand,moreimportant,easytocombinewithotherprograms.Thisstylehasbeencalledtheuseofsoftwaretools,anddependsmoreonhowtheprogramsfitintotheprogrammingenvironmentandhowtheycanbeusedwithotherprogramsthanonhowtheyaredesignedinternally.Thisstylewasbasedontheuseoftools:usingprogramsseparatelyorincombinationtogetajobdone,ratherthandoingitbyhand,bymonolithicself-sufficientsubsystems,orbyspecial-purpose,one-timeprograms.’’</p></blockquote><h3id="historical-note---unix">Historicalnote-Unix</h3><p><ahref="https://en.wikipedia.org/wiki/Unix">Unix</a>wasdevelopedatBellLabsinthe1970sbyagroupledby<ahref="https://en.wikipedia.org/wiki/Douglas_McIlroy">DougMcIlroy</a>.</p><blockquote><p>``ThisistheUnixphilosophy:Writeprogramsthatdoonethinganddoitwell.Writeprogramstoworktogether.Writeprogramstohandletextstreams,becausethatisauniversalinterface.’’—DougMcIlroy</p></blockquote><h2id="goals">Goals</h2><p>Weplantocoverthefollowingtopicsinthisnote.</p><ul><li>Theshell</li><li>Thefilesystem</li></ul><h2id="the-shell">Theshell</h2><h3id="commands-switches-arguments">Commands,switches,arguments</h3><p>TheshellistheUnixcommand-lineinterpreter.Itprovidesaninterfacebetweentheuserandthekernelandexecutesprogramscalled‘commands’.Forexample,ifauserenters<codeclass="language-plaintexthighlighter-rouge">ls</code>thentheshellexecutesthe<codeclass="language-plaintexthighlighter-rouge">ls</code>command,whichactuallyexecutesaprogramstoredinthefile<codeclass="language-plaintexthighlighter-rouge">/bin/ls</code>.Theshellcanalsoexecuteotherprogramsincludingscripts(textfilesinterpretedbyaprogramlikepythonorbash)andcompiledprograms(e.g.,writteninC).Evenyourownprograms–oncemarked‘executable’–becomecommandsyoucanrunfromtheshell!</p><p>YouwillgetbyinthecoursebybecomingfamiliarwithasubsetoftheUnixcommands;don’tletyourselfbeoverwhelmedbythepresenceofhundredsofcommands.Youwillprobablyberegularlyusing2-3dozenofthembytheendoftheterm.</p><p>Unixhasoftenbeencriticizedforbeingveryterse(it’srumoredthatitsdesignerswerebadtypists).Manycommandshaveshort,crypticnamesandvowelsareararity:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>awk,cat,cp,cd,chmod,echo,find,grep,ls,mv,rm,tr,sed,comm</code></pre></div></div><p>Wewilllearntouseallofthesecommandsandmore.</p><p>Unixcommandoutputisalsoveryterse-thedefaultactiononsuccessissilence.Onlyerrorsarereported,anderrormessagesareoftenterse.Unixcommandsareoftentermed‘tools’or‘utilities’,becausetheyaremeanttobesimpletoolsthatyoucancombineinnovelways.</p><p>Instructionsenteredinresponsetotheshellpromptareinterpretedfirstbytheshell-expandinganyvariablereferences,filenamewildcards,orspecialsyntax.Thus,theshellcanrewritethecommandline;then,itexpectsthecommandlinetohavethefollowingsyntax:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nb">command</span><spanclass="o">[</span>arg1]...</code></pre></div></div><p>Thebrackets<codeclass="language-plaintexthighlighter-rouge">[]</code>indicatethattheargumentsareoptional,andthenotationabovemeansthattherearezeroormorearguments.Argumentsareseparatedbywhitespace.Manycommandscanbeexecutedwithorwithoutarguments.Othersrequirearguments,oracertainnumberofarguments,(e.g.,<codeclass="language-plaintexthighlighter-rouge">cpsort.canothersort.c</code>)toworkcorrectly.Ifnonearesupplied,theywillprovidesomeerrormessageinreturn.AnotherpartoftheUnixphilosophyistoavoidanexplosioninthenumberofcommandsbyhavingmostcommandssupportvarious<em>options</em>(sometimescalled<em>flags</em>or<em>switches</em>),whichmodifytheactionsofthecommands.</p><p>Forexample,let’susethe<codeclass="language-plaintexthighlighter-rouge">ls</code>commandandthe<codeclass="language-plaintexthighlighter-rouge">-l</code>optionswitchtolistinlongformatthefile<codeclass="language-plaintexthighlighter-rouge">filename.c</code>.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nb">ls</span><spanclass="nt">-l</span>filename.c</code></pre></div></div><p>Switchesareoftensinglecharactersprecededbyahyphen(e.g.,<codeclass="language-plaintexthighlighter-rouge">-l</code>).Mostcommandsacceptswitchesinanyorder,thoughtheygenerallymustappearbeforealltherealarguments(usuallyfilenames).Inthecaseofthe<codeclass="language-plaintexthighlighter-rouge">ls</code>examplebelow,thecommandargumentsrepresentfileordirectorynames.Theoptionsmodifytheoperationofthecommandandareusuallyoperatedonbytheprograminvokedbytheshellratherthantheshellitself.</p><p>Unixprogramsalwaysreceivealistofarguments,containingatleastoneargument,whichisalwaysthecommandnameitself.So,for<codeclass="language-plaintexthighlighter-rouge">ls</code>thatfirstargumentwouldbe“<codeclass="language-plaintexthighlighter-rouge">ls</code>”.Thefirstargumentisreferredtoasargument0,“thezero-thargument”.Inour<codeclass="language-plaintexthighlighter-rouge">ls</code>example,argument1is<codeclass="language-plaintexthighlighter-rouge">-l</code>andargument2is<codeclass="language-plaintexthighlighter-rouge">filename.c</code>.Somecommandsalsoaccepttheirswitchesgroupedtogether.Forexample,thefollowingswitchesto<codeclass="language-plaintexthighlighter-rouge">ls</code>areidentical:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nb">ls</span><spanclass="nt">-tla</span>foople<spanclass="k">*</span>...<spanclass="nb">ls</span><spanclass="nt">-t</span><spanclass="nt">-l</span><spanclass="nt">-a</span>foople<spanclass="k">*</span></code></pre></div></div><p>Theshellparsesthewordsortokens(commandnameandarguments)youtypeonthecommandline,andasksthekerneltoexecutetheprogramcorrespondingtothatcommand;theinterpretationofthearguments(asswitches,filenames,orsomethingelse)isdeterminedbythatprogram.</p><p>Typically,theshellprocessesthecompletelineafteracarriagereturnisenteredandthengoesofftofindtheprogramthatthecommandlinespecified.Ifthecommandisapathname,whetherrelative(e.g.,<codeclass="language-plaintexthighlighter-rouge">./mycommand</code>)orabsolute(e.g.,<codeclass="language-plaintexthighlighter-rouge">/bin/ls</code>or<codeclass="language-plaintexthighlighter-rouge">~engs50/mycommand</code>),theshellsimplyexecutestheprograminthatfile.Ifthecommandisnotapathname,theshellsearchesthroughalistofdirectoriesinyour“path”,whichisdefinedbytheshellvariablecalled<codeclass="language-plaintexthighlighter-rouge">PATH</code>.</p><h2id="shells-path">Shell’s‘Path’</h2><p>Takealookatyour<codeclass="language-plaintexthighlighter-rouge">PATH</code>byaskingtheshelltosubstituteitsvalue(<codeclass="language-plaintexthighlighter-rouge">$PATH</code>)andpassitasanargumenttothe<codeclass="language-plaintexthighlighter-rouge">echo</code>command:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">echo</span><spanclass="nv">$PATH</span>/usr/lib64/qt-3.3/bin:/usr/lib64/ccache:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/net/class/engs50/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/java/j2sdk/bin:/usr/local/bin:/usr/local/bin/X11:.<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><p>Notethatingeneraltheoutputfromthecommandsshowninthisnotedemonstratenotionaloutput.Youwillnotseeexactlythesameinformationportrayedifyouexecutethesamecommands.Shellpromptsshowyouthecurrentuser,machine,andlocatione.g.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="err">$</span></code></pre></div></div><p>isashellprompt($)foruser“engs50”onmachine“mc”withtheshellcurrentlyintheusershomedirectory(~).</p><p>Sowheredoesthe<codeclass="language-plaintexthighlighter-rouge">ls</code>commandexecutedaboveresideintheUnixdirectoryhierarchy?Let’suseanothercommandtofindout.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>which<spanclass="nb">lsls</span>isaliasedto<spanclass="sb">`</span><spanclass="nb">ls</span><spanclass="nt">-F</span><spanclass="s1">'lsis/usr/bin/lslsis/bin/lslsis/usr/bin/ls[engs50@mc~]$</span></code></pre></div></div><p>Thefirstlineofresponsesaysthat<codeclass="language-plaintexthighlighter-rouge">ls</code>is“aliased”.Thisisashellfeature;theshellallowsustodefine“aliases”,whichactjustlikecommandsbutareactuallyjustatextualsubstitutionofacommandname(thealias)tosomeotherstring(inthiscase,<codeclass="language-plaintexthighlighter-rouge">ls-F</code>).Thus,anytimeItype<codeclass="language-plaintexthighlighter-rouge">lsblahblah</code>,ittreatsitasifIhadtyped<codeclass="language-plaintexthighlighter-rouge">ls-Fblahblah</code>.The<codeclass="language-plaintexthighlighter-rouge">-F</code>optiontells<codeclass="language-plaintexthighlighter-rouge">ls</code>toaddatrailingsymboltosomenamesinitsoutput;itaddsa<codeclass="language-plaintexthighlighter-rouge">/</code>tothenamesofdirectories,a<codeclass="language-plaintexthighlighter-rouge">@</code>tothenamesofsymboliclinks(um,that’sanotherconversation),andsomeotherevenspecializedcases.</p><p>Ofcourse,theshellthenstillneedstoresolve<codeclass="language-plaintexthighlighter-rouge">ls</code>.Itthensearchesthe<codeclass="language-plaintexthighlighter-rouge">PATH</code>tofindanexecutablefilewiththatname;inthiscase,itappearsthat<codeclass="language-plaintexthighlighter-rouge">ls</code>existsinboth<codeclass="language-plaintexthighlighter-rouge">/usr/bin</code>andin<codeclass="language-plaintexthighlighter-rouge">/bin</code>.Theshellwillexecutethefirstone,becauseitisfoundfirstinthePATH.Belowyoucanseetheeffectofrunning<codeclass="language-plaintexthighlighter-rouge">ls</code>(thealias)and<codeclass="language-plaintexthighlighter-rouge">/bin/ls</code>(therawcommand,withoutthe<codeclass="language-plaintexthighlighter-rouge">-F</code>).</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>Archive/private/proc-logpublic_html/resources/web@<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>/bin/lsArchiveprivateproc-logpublic_htmlresourcesweb<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><h2id="viewing-files">Viewingfiles</h2><p>Youcanseethecontentsofanyfilewiththe<codeclass="language-plaintexthighlighter-rouge">cat</code>command,sonamedbecauseitconcatenatesallthefileslistedasarguments,printingoneaftertheother.Forverylongfiles,though,theoutputwillquicklyscrolloffyourterminal.</p><p>LessIsMore:The<codeclass="language-plaintexthighlighter-rouge">less</code>and<codeclass="language-plaintexthighlighter-rouge">more</code>commandsarehandyforquicklylookingatfiles.Thesyntaxis<codeclass="language-plaintexthighlighter-rouge">lessfilename</code>and<codeclass="language-plaintexthighlighter-rouge">morefilename</code>.Takealookatthe<codeclass="language-plaintexthighlighter-rouge">man</code>pagestogetthedetailsofeach.Similarly,<codeclass="language-plaintexthighlighter-rouge">head</code>and<codeclass="language-plaintexthighlighter-rouge">tail</code>displayanumberoflines(selectableviaswitches,ofcourse)atthebeginningandendofafile,respectively.</p><p>Seewhatthesedo:<codeclass="language-plaintexthighlighter-rouge">cat/etc/passwd</code>,<codeclass="language-plaintexthighlighter-rouge">head/etc/passwd</code>,<codeclass="language-plaintexthighlighter-rouge">tail/etc/passwd</code>,<codeclass="language-plaintexthighlighter-rouge">more/etc/passwd</code>,and<codeclass="language-plaintexthighlighter-rouge">less/etc/passwd</code>.Thefile<codeclass="language-plaintexthighlighter-rouge">/etc/passwd</code>listsalltheaccountsonthesystem,andinformationabouteachaccount.</p><h2id="editing-files">Editingfiles</h2><p>Longbeforetherewerewindowsandgraphicaldisplays,orevenscreens,thereweretexteditors.TwoareincommonuseonUnixsystemtoday:<codeclass="language-plaintexthighlighter-rouge">emacs</code>and<codeclass="language-plaintexthighlighter-rouge">vi</code>.Actually,thereisanexpanded/improvedversionof<codeclass="language-plaintexthighlighter-rouge">vi</code>called<codeclass="language-plaintexthighlighter-rouge">vim</code>,whichisquitepopular.</p><p>IstronglyrecommendemacsifyouareplanningtotakeEngs62–ourembeddedsystemscourse,sincetheXilinxvivadotoolchainprovidesanEmacsmodeforediting.Also,youwillfindthatmanyemacscommandsareavailableinbashforworkingatthecommandline.</p><p>Youshouldtrybothandbecomecomfortablewithatleastone.Yes,it’stemptingtouseanexternalgraphicaleditor(likeSublime),butitisfrequentlythecasewhenworkingwithembeddedsystemsand/orserversthattheresimplyisnotagraphicaluserinterface;inthesecasesyou<em>must</em>useatext-onlyeditorsoyoushouldgetusedtoitnow.</p><p>See/engs50/Resources/#editorsforsomeresourcesthatcanhelpyoulearn<codeclass="language-plaintexthighlighter-rouge">emacs</code>or<codeclass="language-plaintexthighlighter-rouge">vim</code>.I’veprovideda15min–“LearnEmacsFast”videotohelp.</p><h2id="unix-file-system">Unixfilesystem</h2><p>TheUnixfilesystemisa<em>hierarchicalfilesystem</em>.Thefilesystemconsistsofaverysmallnumberofdifferentfile<em>types</em>.Thetwomostcommontypesare<em>files</em>and<em>directories</em>.</p><p>Adirectory(akintoafolderonaMacOSorWindowscomputer)containsthenamesandlocationsofallfilesanddirectoriesbelowit.Adirectoryalwayscontainstwospecialfiles<codeclass="language-plaintexthighlighter-rouge">.</code>(dot)and<codeclass="language-plaintexthighlighter-rouge">..</code>(dotdot);<codeclass="language-plaintexthighlighter-rouge">.</code>representsthedirectoryitself,and<codeclass="language-plaintexthighlighter-rouge">..</code>representsthedirectory’sparent.Inthefollowing,Imakeanewdirectory,changemycurrentworkingdirectorytobethatnewdirectory,createanewfileinthatdirectory,anduse<codeclass="language-plaintexthighlighter-rouge">ls</code>toexplorethecontentsofthenewdirectoryanditsparent.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">mkdirtest</span><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">cdtest</span><spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">echo</span>hello<spanclass="o">&gt;</span>somefile<spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="nt">-a</span>./../somefile<spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">ls</span>somefile<spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="nb">.</span>somefile<spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">ls</span>..Archive/private/proc-logpublic_html/resources/<spanclass="nb">test</span>/web@<spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span></code></pre></div></div><p>Directorynamesareseparatedbya<em>forward</em>slash<codeclass="language-plaintexthighlighter-rouge">/</code>,formingpathnames.A<em>pathname</em>isafilenamethatincludessomeorallofthedirectoriesleadingtothefile;an<em>absolutepathname</em>isrelativetotheroot(<codeclass="language-plaintexthighlighter-rouge">/</code>)directoryandbeginswitha<codeclass="language-plaintexthighlighter-rouge">/</code>,inthefirstexamplebelow,whereasa<em>relativepathname</em>isrelativetothecurrentworkingdirectory,asinthesecondexamplebelow.Noticethatarelativepathnamecanalsouse<codeclass="language-plaintexthighlighter-rouge">.</code>or<codeclass="language-plaintexthighlighter-rouge">..</code>,asinthethirdexamplebelow.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>/net/class/engs50/public_html/Labs/<spanclass="k">*</span>/net/class/engs50/public_html/Labs/index.html/net/class/engs50/public_html/Labs/Lab0-Preliminaries.html/net/class/engs50/public_html/Labs/usernames.txt<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>public_html/Resources/<spanclass="k">*</span>public_html/Resources/DougMcIlroy.pdfpublic_html/Resources/Homebrew0.pngpublic_html/Resources/Homebrew1.pngpublic_html/Resources/Homebrew.htmlpublic_html/Resources/index.htmlpublic_html/Resources/RC13972-C-Programming.docxpublic_html/Resources/RC13972-C-Programming.pdfpublic_html/Resources/StartingSublime.pdfpublic_html/Resources/toomey-unix.pdf<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>../cs10/public_html/azul.csshelp.htmllab/oldindex.htmlsoftware.htmlexams/indexBAK.htmllectures/sa/syllabus.htmlexams.htmlindex.htmlold/schedule.html<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><p>Asimpliedbytheshellprompt,thecurrentworkingdirectoryis<codeclass="language-plaintexthighlighter-rouge">~engs50</code>,whichisshorthandfor“thehomedirectoryofuser<codeclass="language-plaintexthighlighter-rouge">engs50</code>”,whichhappenstobethedirectoryatpath<codeclass="language-plaintexthighlighter-rouge">/net/class/engs50</code>.</p><h3id="moving-around-the-file-system">Movingaroundthefilesystem</h3><p>The“changedirectory”command(<codeclass="language-plaintexthighlighter-rouge">cd</code>)allowsustomovearoundtheUnixdirectoryhierarchy,thatis,tochangeour“currentworkingdirectory”fromwhichallrelativefilenamesandpathnameswillberesolved.Let’scombine<codeclass="language-plaintexthighlighter-rouge">pwd</code>,<codeclass="language-plaintexthighlighter-rouge">ls</code>,and<codeclass="language-plaintexthighlighter-rouge">cd</code>tomovearoundthelocaldirectoriesthatarerootedat<codeclass="language-plaintexthighlighter-rouge">/net/class/engs50</code>.Rememberthat<codeclass="language-plaintexthighlighter-rouge">~</code>referstothehomedirectoryand<codeclass="language-plaintexthighlighter-rouge">..</code>referstotheparentdirectory.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">mkdirtest</span><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">cdtest</span><spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="o">[</span>engs50@mc~/test]<spanclass="nv">$</span><spanclass="nb">cd</span>..<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">cd</span>public_html/<spanclass="o">[</span>engs50@mc~/public_html]<spanclass="nv">$</span><spanclass="nb">ls</span>css/Labs/Logistics/Reading/Schedule.pdfindex.htmlNotes/Project/Resources/Schedule.xlsx<spanclass="o">[</span>engs50@mc~/public_html]<spanclass="nv">$</span><spanclass="nb">cd</span>Resources/<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>DougMcIlroy.pdfHomebrew.htmlRC13972-C-Programming.pdfHomebrew0.pngindex.htmlStartingSublime.pdfHomebrew1.pngRC13972-C-Programming.docxtoomey-unix.pdf<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">cd</span>../..<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>Archive/private/proc-logpublic_html/resources/<spanclass="nb">test</span>/web@<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><p>Theshellpromptishelpfullytrackingthecurrentworkingdirectoryaswemove.</p><h3id="listing-and-globbing-files">Listingandglobbingfiles</h3><p>Hereareapopularsetofswitchesyoucanusewith<codeclass="language-plaintexthighlighter-rouge">ls</code>:</p><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>-llistinlongformat(aswehavebeendoing)-alistallentries(including`dot`files,whicharenormallyhidden)-tsortbymodificationtime(latestfirst)-rlistinreverseorder(alphabeticalortime)-Rlistthedirectoryanditssubdirectoriesrecursively</code></pre></div></div><p>Theshellalsointerpretscertainspecialcharacterslike<codeclass="language-plaintexthighlighter-rouge">*</code>,<codeclass="language-plaintexthighlighter-rouge">?</code>,and<codeclass="language-plaintexthighlighter-rouge">[]</code>;<codeclass="language-plaintexthighlighter-rouge">*</code>matcheszeroormorecharacters,<codeclass="language-plaintexthighlighter-rouge">?</code>matchesonecharacter,and<codeclass="language-plaintexthighlighter-rouge">[]</code>matchesonecharacterfromtheset(orrange)ofcharacterslistedwithinthebrackets:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">cd</span>public_html/Resources/<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>DougMcIlroy.pdfHomebrew.htmlRC13972-C-Programming.pdfHomebrew0.pngindex.htmlStartingSublime.pdfHomebrew1.pngRC13972-C-Programming.docxtoomey-unix.pdf<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="k">*</span>.pdfDougMcIlroy.pdfStartingSublime.pdfRC13972-C-Programming.pdftoomey-unix.pdf<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>H<spanclass="k">*</span>Homebrew0.pngHomebrew1.pngHomebrew.html<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="k">*</span>-<spanclass="k">*</span>RC13972-C-Programming.docxRC13972-C-Programming.pdftoomey-unix.pdf<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>Homebrew<spanclass="k">*</span>.<spanclass="k">*</span>Homebrew0.pngHomebrew1.pngHomebrew.html<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>Homebrew?.<spanclass="k">*</span>Homebrew0.pngHomebrew1.png<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span><spanclass="nb">ls</span>Homebrew[0-9].pngHomebrew0.pngHomebrew1.png<spanclass="o">[</span>engs50@mc~/public_html/Resources]<spanclass="nv">$</span></code></pre></div></div><h3id="hidden-files">Hiddenfiles</h3><p>The<codeclass="language-plaintexthighlighter-rouge">ls</code>programnormallydoesnotlistanyfileswhosefilenamebeginswith<codeclass="language-plaintexthighlighter-rouge">.</code>Thereisnothingspecialaboutthesefiles,except<codeclass="language-plaintexthighlighter-rouge">.</code>and<codeclass="language-plaintexthighlighter-rouge">..</code>,asfarasUnixisconcerned.It’ssimplyaconvention-fileswhosenamesbeginwith<codeclass="language-plaintexthighlighter-rouge">.</code>aretobeconsidered‘hidden’,andthusnotlistedby<codeclass="language-plaintexthighlighter-rouge">ls</code>ormatchedwithbytheshell’s<codeclass="language-plaintexthighlighter-rouge">*</code>globbingcharacter.Homedirectories,inparticular,includemany‘hidden’(butimportant!)files.The<codeclass="language-plaintexthighlighter-rouge">-a</code>switchtells<codeclass="language-plaintexthighlighter-rouge">ls</code>tolist“all”files,includingthosethatbeginwithadot(aka,thehiddenfiles).</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span>Archive/private/public_html/resources/web@<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="nt">-a</span>./Archive/.bash_logout.bashrc.environsetprivate/public_html/.ssh/.viminfoweb@../.bash_history.bash_profile.emacs.d/.forward.procmailrcresources/.vim/.vimrc</code></pre></div></div><p>toseejustthedotfiles,let’sgetcleverwiththeshell’sglobcharacters:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span><spanclass="nb">ls</span><spanclass="nt">-ad</span>.??<spanclass="k">*</span>.bash_history.bash_profile.emacs.d/.forward.ssh/.viminfo.bash_logout.bashrc.environset.procmailrc.vim/.vimrc<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><p>Allofthese“dotfiles”(or“dotdirectories”)areimportanttooneprogramoranother:</p><ul><li><codeclass="language-plaintexthighlighter-rouge">.bash_history</code>-usedbybashtorecordahistoryofthecommandsyou’vetyped</li><li><codeclass="language-plaintexthighlighter-rouge">.bash_logout</code>-executedbybashwhenyoulogout</li><li><codeclass="language-plaintexthighlighter-rouge">.bash_profile</code>-executedbybashwhenyoulogin</li><li><codeclass="language-plaintexthighlighter-rouge">.bashrc</code>-executedbybashwheneveryoustartanewshell</li><li><codeclass="language-plaintexthighlighter-rouge">.emacs.d/</code>-adirectoryusedbyemacstexteditor</li><li><codeclass="language-plaintexthighlighter-rouge">.environset</code>-aDartmouth-specificthing;readby.bashrc</li><li><codeclass="language-plaintexthighlighter-rouge">.forward</code>-tellsMailwheretoforwadyouremail</li><li><codeclass="language-plaintexthighlighter-rouge">.procmailrc</code>-forhandlingemailwith<codeclass="language-plaintexthighlighter-rouge">procmail</code></li><li><codeclass="language-plaintexthighlighter-rouge">.ssh/</code>-directoryusedbyinboundsshconnections</li><li><codeclass="language-plaintexthighlighter-rouge">.vim/</code>-adirectoryusedbyvimtexteditor</li><li><codeclass="language-plaintexthighlighter-rouge">.viminfo</code>-usedbyvimtexteditor</li><li><codeclass="language-plaintexthighlighter-rouge">.vimrc</code>-usedbyvimtexteditor</li></ul><h3id="bash-shell-startup-files">Bashshellstartupfiles</h3><p>The<codeclass="language-plaintexthighlighter-rouge">bash</code>shelllooksforseveralfilesinyourhomedirectory:</p><ul><li><codeclass="language-plaintexthighlighter-rouge">.bash_profile</code>-executedbybashwhenyoulogin</li><li><codeclass="language-plaintexthighlighter-rouge">.bashrc</code>-executedbybashwheneveryoustartanewshell</li><li><codeclass="language-plaintexthighlighter-rouge">.bash_logout</code>-executedbybashwhenyoulogout</li><li><codeclass="language-plaintexthighlighter-rouge">.bash_history</code>-usedbybashtorecordahistoryofthecommandsyou’vetyped</li></ul><p>The<codeclass="language-plaintexthighlighter-rouge">.bashrc</code>fileisespeciallyimportant,because<codeclass="language-plaintexthighlighter-rouge">bash</code>readsiteverytimeyoustartanew<codeclass="language-plaintexthighlighter-rouge">bash</code>shell,thatis,whenyoulogin,whenyoustartanewinteractiveshell,orwhenyourunanewbashscript.(Incontrast,<codeclass="language-plaintexthighlighter-rouge">.bash_profile</code>isonlyreadwhenyoulogin.)Ineachcase,<codeclass="language-plaintexthighlighter-rouge">bash</code>readsthefilesandexecutesthecommandstherein.Thus,youcanconfigureyour<codeclass="language-plaintexthighlighter-rouge">bash</code>experiencebyhavingitdeclaresomevariables,definesomealiases,andsetupsomepersonalfavorites.</p><h2id="locating-files">Locatingfiles</h2><p>Manytimesyouwanttofindafilebutdonotknowwhereitisinthedirectorytree(Unixdirectorystructureisatree-rootedatthe<codeclass="language-plaintexthighlighter-rouge">/</code>directory).The<codeclass="language-plaintexthighlighter-rouge">find</code>commandcanwalkafilehierarchy:</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>find<spanclass="nb">.</span><spanclass="nt">-name</span>DougMcIlroy.pdf<spanclass="nt">-print</span>./public_html/Resources/DougMcIlroy.pdf<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>findpublic_html<spanclass="nt">-iname</span>reading<spanclass="nt">-print</span>public_html/Reading<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>findpublic_html<spanclass="nt">-type</span>d<spanclass="nt">-print</span>public_htmlpublic_html/Logisticspublic_html/Resourcespublic_html/Labspublic_html/Projectpublic_html/Notespublic_html/csspublic_html/Reading<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>findpublic_html<spanclass="nt">-name</span><spanclass="se">\*</span>.html<spanclass="nt">-print</span>public_html/Logistics/index.htmlpublic_html/Resources/index.htmlpublic_html/Resources/Homebrew.htmlpublic_html/Labs/index.htmlpublic_html/Labs/Lab0-Preliminaries.htmlpublic_html/Project/index.htmlpublic_html/Notes/01-gettingstarted.htmlpublic_html/Notes/index.htmlpublic_html/index.htmlpublic_html/Reading/index.html<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>findpublic_html<spanclass="nt">-name</span><spanclass="se">\*</span>.png<spanclass="nt">-mtime</span><spanclass="nt">-1</span><spanclass="nt">-print</span>public_html/Resources/Homebrew1.pngpublic_html/Resources/Homebrew0.png<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div><p>Thefirstexamplesearchesdirectory<codeclass="language-plaintexthighlighter-rouge">.</code>tofindafilebyaspecificnameandprintsitspathname.Thesecondexampleused<codeclass="language-plaintexthighlighter-rouge">-iname</code>(caseinsensitivesearch)insteadof<codeclass="language-plaintexthighlighter-rouge">-name</code>(whichiscasesensitive)tosearch<codeclass="language-plaintexthighlighter-rouge">public_html</code>forthe“reading”directory.Thethirdexamplesearches<codeclass="language-plaintexthighlighter-rouge">public_html</code>foranydirectories(<codeclass="language-plaintexthighlighter-rouge">-typed</code>)andprintstheirpathnames.Thefourthexampleusesawildcard<codeclass="language-plaintexthighlighter-rouge">*</code>toprintpathnamesoffileswhosenamematchesapattern;thebackslash<codeclass="language-plaintexthighlighter-rouge">\</code>istheretopreventtheshellfrominterpretingthe<codeclass="language-plaintexthighlighter-rouge">*</code>,allowingittobepartoftheargumentto<codeclass="language-plaintexthighlighter-rouge">find</code>,whichinterpretsthatcharacteritself.Thefifthexamplecombinestwofactors,toprintpathnamesoffileswhosenamematches<codeclass="language-plaintexthighlighter-rouge">*.png</code>andwhosemodicationtime<codeclass="language-plaintexthighlighter-rouge">mtime</code>islessthanoneday<codeclass="language-plaintexthighlighter-rouge">-1</code>inthepast.</p><h2id="our-top-commands">Ourtopcommands</h2><p>We’veexploredalmostfourdozenshellcommands,below(thosewith*asteriskwillbeintroducedlater).You’lloftenneedonlyabouthalfofthem.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="nb">aliascat</span>,<spanclass="nb">cd</span>,<spanclass="nb">chmod</span>,<spanclass="nb">comm</span>,<spanclass="nb">cp</span>,<spanclass="nb">cutdateecho</span>,emacs,<spanclass="nb">expr</span>,<spanclass="nb">exit</span>file,findgcc,gdb<spanclass="k">*</span>,git<spanclass="k">*</span>,<spanclass="nb">grephead</span>less,<spanclass="nb">logout</span>,lpr,<spanclass="nb">ls</span>make<spanclass="k">*</span>,man,<spanclass="nb">mkdir</span>,more,<spanclass="nb">mv</span>open<spanclass="o">(</span>MacOS<spanclass="o">)</span>pbpaste,pbcopy<spanclass="o">(</span>MacOS<spanclass="o">)</span><spanclass="nb">pwdrm</span>,<spanclass="nb">rmdir</span>scp,<spanclass="nb">sed</span>,<spanclass="nb">sort</span>,ssh<spanclass="nb">tail</span>,<spanclass="nb">tar</span>,<spanclass="nb">touch</span>,<spanclass="nb">truniq</span>whereis,whichvi,vim</code></pre></div></div><h1id="historical-note">Historicalnote</h1><p>Recallwementioned“teletypes”inthefirstlecture.<strong>Itwas<em>atDartmouth</em>thatateletypewasactuallyusedtointeractwitharemotecomputer</strong>-thefirsteverlong-distanceterminal,decadesbeforetheInternet.</p><p><imgsrc="/engs50/Notes/bash1/history-Stibitz1.jpg"alt="Stibitzplaque"/></p><h2id="navigating-within-man-pages">Navigatingwithinmanpages</h2><p>Youmayhavefoundthe<codeclass="language-plaintexthighlighter-rouge">man</code>systemtobealittlechallengingtonavigate.Thereisamessagethatisdisplayedattheverybottomofthescreenwhenyoufirstenterthecommandthatyoumighthavemissed(mostpeopledo):</p><pre><codeclass="language-man">Manualpagexxx(n)line1(presshforhelporqtoquit)</code></pre><p>Ifyouenter‘<codeclass="language-plaintexthighlighter-rouge">h</code>’toseethehelpyouwillfindmanymorecommandsthanyou’relikelytoeverusewhenreading<codeclass="language-plaintexthighlighter-rouge">man</code>pages.Thisisbecausetheman-pagereaderisactuallythe<codeclass="language-plaintexthighlighter-rouge">less</code>commandofUnix.Itendtouseonlyafew:</p><ul><li><codeclass="language-plaintexthighlighter-rouge">f</code>or<em>space</em>(thespacebar)advancestothenextscreenful,</li><li><codeclass="language-plaintexthighlighter-rouge">b</code>goesbacktothepreviousscreenful,</li><li><codeclass="language-plaintexthighlighter-rouge">e</code>ordown-arrowadvancesonemoreline,</li><li><codeclass="language-plaintexthighlighter-rouge">y</code>orup-arrowgoesbackoneline,</li><li><codeclass="language-plaintexthighlighter-rouge">/</code>allowsonetotypeasearchphraseandhitreturn,</li><li><codeclass="language-plaintexthighlighter-rouge">q</code>quits<codeclass="language-plaintexthighlighter-rouge">man</code>,andreturnstotheshellprompt.</li></ul><h2id="there-are-shells-shells-and-more-shells">Thereareshells,shells,andmoreshells</h2><p>ThereareanumberofshellsavailabletoaUnixuser–sowhichonedoyouselect?Themostcommonshellsare:</p><ul><li><codeclass="language-plaintexthighlighter-rouge">sh</code>:theoriginalshell,knownastheBourneShell,</li><li><codeclass="language-plaintexthighlighter-rouge">csh</code>,<codeclass="language-plaintexthighlighter-rouge">tcsh</code>:well-knownandwidelyusedderivativesoftheBourneshell,</li><li><codeclass="language-plaintexthighlighter-rouge">ksh</code>:theKornshell,and</li><li><codeclass="language-plaintexthighlighter-rouge">bash</code>:theBourneAgainSHell,developedbyGNU,isthemostpopularshellusedforLinux.</li></ul><p><codeclass="language-plaintexthighlighter-rouge">bash</code>isthedefaultshellfornewUnixaccountsinourdepartment.</p><p>Thebasicshelloperationisasfollows.Theshellparsesthecommandline;thefirstwordonthelineisthecommandname.Ifthecommandisanalias,itsubstitutesthealiastextandagainidentifiesthecommand.Ifthecommandisonebuilt-intotheshell(thereareafew,like<codeclass="language-plaintexthighlighter-rouge">cd</code>,<codeclass="language-plaintexthighlighter-rouge">echo</code>,<codeclass="language-plaintexthighlighter-rouge">pwd</code>,and<codeclass="language-plaintexthighlighter-rouge">which</code>)itperformsthatcommand’saction.Otherwise,theshelllooksfortheexecutablefilethatmatchesthatprogramnamebysearchingdirectorieslistedinthe<codeclass="language-plaintexthighlighter-rouge">PATH</code>variable.Theshellthenstartsthatprogramasanewprocessandpassesanyoptionsandargumentstotheprogram.A<em>process</em>isarunningprogram.Youcanseealistofyourprocesseswiththecommand<codeclass="language-plaintexthighlighter-rouge">ps</code>.</p><h2id="file-type">Filetype</h2><p>Unixitselfimposesalmostnoconstraintsorinterpretationonthecontentsoffiles-theonlycommoncaseisthatofacompiled,executableprogram:ithastobeinaveryspecificbinaryformatfortheoperatingsystem(Unix)toexecuteit.Allotherfilesareusedbysomeprogramoranother,andit’suptothoseprogramstointerpretthecontentsastheyseefit.ThegreatpowerofUnix,andthecommonshellcommands,isthatanyfilecanbereadbyanyprogram;themostcommonformatareplain-text(ASCII)filesthatareformattedasaseriesof“lines”delimitedby“newline”characters(\n,knownbyitsASCIIcode012).</p><p>Ifyouareunsureaboutthecontentsofafile(text,binary,compressed,Unixexecutabe,someformatspecificacertainapplication,etc.).The<codeclass="language-plaintexthighlighter-rouge">file</code>commandisuseful;itmakesanattempttojudgetheformatofthefile.</p><divclass="language-bashhighlighter-rouge"><divclass="highlight"><preclass="highlight"><code><spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>filedownloadeddownloaded:POSIX<spanclass="nb">tar</span>archive<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>filefig1fig1:GIFimagedata,version87a,440x306<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>filetrash.tar.gztrash.tar.gz:<spanclass="nb">gzip</span>compresseddata,fromUnix<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>filepublic_html/Schedule.<spanclass="k">*</span>public_html/Schedule.pdf:PDFdocument,version1.3public_html/Schedule.xlsx:MicrosoftExcel2007+<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span>file/bin/ls/bin/ls:ELF64-bitLSBsharedobject,x86-64,version1<spanclass="o">(</span>SYSV<spanclass="o">)</span>,dynamicallylinked,interpreter/lib64/ld-linux-x86-64.so.2,<spanclass="k">for</span>GNU/Linux2.6.32,BuildID[sha1]<spanclass="o">=</span>0ac5c509289d650534ce80cdbf5b72744b5c5f3d,stripped<spanclass="o">[</span>engs50@mc~]<spanclass="nv">$</span></code></pre></div></div></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
