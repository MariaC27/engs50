https://thayer.github.io/engs50/Notes/c2/
2
10117
<!DOCTYPEhtml><html><head><metacharset="utf-8"><metahttp-equiv="X-UA-Compatible"content="IE=edge"><metaname="viewport"content="width=device-width,initial-scale=1"><title>TheStandardCLibraries</title><metaname="description"content="InEngs50youwilllearnhowtodesign&buildlarge,reliable,maintainable,andunderstandablesoftwaresystems.IntheprocessyouwilllearntoprograminCwithUnixdevelopmenttools."><linkrel="shortcuticon"href="/engs50/50.png"/><linkrel="stylesheet"href="/engs50/css/main.css"><linkrel="canonical"href="/engs50/Notes/c2/"></head><body><headerclass="site-header"><aclass="site-title"href="/engs50/"><imgwidth=48align=centersrc="/engs50/50.png"alt="icon">Engs50(CS50)</a><navclass="site-nav">[<ahref="/engs50/Labs/">Labs</a>][<ahref="/engs50/Notes/">Notes</a>][<ahref="/engs50/Reading/">Reading</a>][<ahref="/engs50/Resources/">Resources</a>][<ahref="/engs50/Examples/">Examples</a>]</nav></header><divclass="page-content"><divclass="wrapper"><articleclass="post"><headerclass="post-header"><h1class="post-title">TheStandardCLibraries</h1></header><divclass="post-content"><p>Inthislecture,wecontinueouracceleratedintroductiontotheCprogramminglanguage.</p><h3id="goals">Goals</h3><p>Welearnseveralthingstoday:</p><ul><li>thestandardI/Olibrary,andauseful<codeclass="language-plaintexthighlighter-rouge">readline()</code></li><li>openingandreadingfromfiles</li><li>arrays,andarraysofstrings</li><li>command-linearguments</li><li>compilingcodefrommultiplefilesintooneprogram</li></ul><p>Youmayalsowanttoreadthe“<ahref="extra.html">lectureextra</a>”,whichhaslotsmoreinformationthatIdonothavetimetocoverinclass.</p><h2id="activity">Activity</h2><p>Today’sclassroom<ahref="activity.html">activity</a>takesalookatthenatureofCstringsasarrays,andwhyyouneedtokeepthatinmind.</p><h2id="live-demos">Livedemos</h2><p>SeemyTerminal<ahref="/engs50/Notes/c2/script.txt">script</a>fromtoday’sclass.</p><ul><li><ahref="/engs50/Examples/names1.c">names0.c</a>:(readalistofnamesintoanarrayandprintitbackout)</li><li><ahref="/engs50/Examples/names1.c">names1.c</a>:(pulls<codeclass="language-plaintexthighlighter-rouge">readline()</code>outto<ahref="/engs50/Examples/readline.c">readline.c</a>and<ahref="/engs50/Examples/readline.h">readline.h</a>)</li><li><ahref="/engs50/Examples/names2.c">names2.c</a>:(readfromafile,ifprovided,insteadoffromstdin);leverages<ahref="/engs50/Examples/freadline.c">freadline.c</a>and<ahref="/engs50/Examples/freadline.h">freadline.h</a></li></ul><p><strong><em>Bonusexample:</em></strong><ahref="/engs50/Examples/strings.c">strings.c</a>:howCstringswork.Wewillnotgettoexplorethisexample-butitiswellworthplayingwithitonyourown.</p><h2id="key-concepts">Keyconcepts</h2><p><ahref="/engs50/Examples/names1.c">names0.c</a>:(readalistofnamesintoanarrayandprintitbackout)</p><h3id="names0c">names0.c</h3><p><strong>preamble</strong></p><ul><li><codeclass="language-plaintexthighlighter-rouge">bool</code>datatypeand<codeclass="language-plaintexthighlighter-rouge">stdbool.h</code></li></ul><p><strong>main</strong></p><ul><li>thenotionof<codeclass="language-plaintexthighlighter-rouge">char*</code>representingastring,andthatstringsarearraysofcharacters</li><li>useof<codeclass="language-plaintexthighlighter-rouge">const</code>forvaluesthatwillneverchange.</li><li>declarationof<codeclass="language-plaintexthighlighter-rouge">names</code>astwo-dimensionalarray;thinkofitasaone-dimensionalarrayofstrings.</li><li><codeclass="language-plaintexthighlighter-rouge">for</code>loopwiththreeparts:<ul><li>1:<codeclass="language-plaintexthighlighter-rouge">n=0</code>initializer</li><li>2:tworeasonstoend(<codeclass="language-plaintexthighlighter-rouge">names</code>isfull,orfilereachesEOF)</li><li>3:empty</li></ul></li><li><codeclass="language-plaintexthighlighter-rouge">printf</code>loopdoesnotinclude<codeclass="language-plaintexthighlighter-rouge">\n</code>becauseeachnameincludesanewlinecharacter,perthecontractwith<codeclass="language-plaintexthighlighter-rouge">readline</code>.</li></ul><p><strong>readline</strong></p><ul><li>wecoulduse<codeclass="language-plaintexthighlighter-rouge">gets(s)</code>toreadalinefromstdin,butitcaneasilyoverwritethespaceallocatedtostring<codeclass="language-plaintexthighlighter-rouge">s</code></li><li>wecoulduse<codeclass="language-plaintexthighlighter-rouge">fgets(s,len,stdin)</code>,whichwillnotoverwriteastring<codeclass="language-plaintexthighlighter-rouge">s</code>ofsize<codeclass="language-plaintexthighlighter-rouge">len</code>,butmaynotreadawholelinefromtheinput.</li><li>let’swriteourown<codeclass="language-plaintexthighlighter-rouge">readline</code>functioninstead.</li><li>detailedcommentdescribingthe<em>contract</em>betweencallerandthefunction.</li><li><codeclass="language-plaintexthighlighter-rouge">while</code>loopthatrunsuntilEOForbufferisfull.(why<codeclass="language-plaintexthighlighter-rouge">pos&lt;len-1</code>insteadof<codeclass="language-plaintexthighlighter-rouge">pos&lt;len</code>?)</li><li>useof<codeclass="language-plaintexthighlighter-rouge">pos++</code>notationtostepthrougharray.</li><li>needtonull-terminatethestringwith<codeclass="language-plaintexthighlighter-rouge">\0</code></li><li><codeclass="language-plaintexthighlighter-rouge">return</code>frominsidetheloop.</li><li>needtostripexcesscharactersfromanover-lengthline,untilwereachEOFornewline.</li></ul><h3id="names1c">names1.c</h3><p><ahref="/engs50/Examples/names1.c">names1.c</a>:(pullsout<codeclass="language-plaintexthighlighter-rouge">readline()</code>to<ahref="/engs50/Examples/readline.c">readline.c</a>and<ahref="/engs50/Examples/readline.h">readline.h</a>)</p><p><strong>names1.c</strong></p><ul><li><codeclass="language-plaintexthighlighter-rouge">#include"readline.h"</code>-notethequotes,ratherthanbrackets.thismeansitwillbesoughtinthethecurrentdirectory,ratherthaninastandardplacewhereClibrarieslive.</li></ul><p><strong>readline.h</strong>-<em>textuallyincluded</em>innames1.catthepointwhere<codeclass="language-plaintexthighlighter-rouge">#include</code>wasused.</p><ul><li>useof<codeclass="language-plaintexthighlighter-rouge">extern</code>ontheprototypetoindicatethisfunctionwillbeprovidedinanother.cfile</li><li><codeclass="language-plaintexthighlighter-rouge">readline</code>headercommentishere,notinthe.cfile,soitiseasilyreadablebyusersofthisfunction.</li><li>useof<codeclass="language-plaintexthighlighter-rouge">#ifndef</code>toprotectagainstrepeatedinclusionofthisfile</li></ul><divclass="language-plaintexthighlighter-rouge"><divclass="highlight"><preclass="highlight"><code>#ifndef__READLINE_H__#define__READLINE_H__...#endif//__READLINE_H__</code></pre></div></div><p><strong>readline.c</strong></p><ul><li>also<codeclass="language-plaintexthighlighter-rouge">#include"readline.h"</code>-notstrictlynecessaryinthiscase,butitgivesthecompilerachancetocheckthatprototype(from.hfile)matchesthedefinition(from.cfile).</li></ul><h3id="names2c">names2.c</h3><p><ahref="/engs50/Examples/names2.c">names2.c</a>:(readfromafile,ifprovided,insteadoffromstdin);leverages<ahref="/engs50/Examples/freadline.c">freadline.c</a>and<ahref="/engs50/Examples/freadline.h">freadline.h</a></p><ul><li><codeclass="language-plaintexthighlighter-rouge">main</code>takesarguments</li><li>codechecksargumentsforvalidity</li><li>useof<codeclass="language-plaintexthighlighter-rouge">fopen</code>toopenafileforreading(<codeclass="language-plaintexthighlighter-rouge">"r"</code>)</li><li>errormessagesprintedto<codeclass="language-plaintexthighlighter-rouge">stderr</code>with<codeclass="language-plaintexthighlighter-rouge">fprintf</code></li><li><codeclass="language-plaintexthighlighter-rouge">fclose(fp)</code>latercalledtoclosethefile</li><li><codeclass="language-plaintexthighlighter-rouge">freadline</code>islike<codeclass="language-plaintexthighlighter-rouge">readline</code>exceptituses<codeclass="language-plaintexthighlighter-rouge">getc(fp)</code>insteadof<codeclass="language-plaintexthighlighter-rouge">getchar()</code></li><li>notethetypeof<codeclass="language-plaintexthighlighter-rouge">fp</code>is<codeclass="language-plaintexthighlighter-rouge">FILE*</code>;it’sapointertoanobjectoftypeFILE.Moreonthatlater.</li></ul><h2id="activity-1">Activity</h2><p>Today’sclassroom<ahref="activity.html">activity</a>exploredwhathappenswhenyouoverwritetheendofastring.</p></div></article></div></div><footerclass="site-footer"><divclass="wrapper"><h2class="footer-heading">Engs50(CS50)--DartmouthCollege</h2><p><fontsize=-1>ThisversionofthecourseisbaseduponthosedesignedbyProfessorsPalmer,Kotz,Zhou,Campbell,andBalkcom.Iamdeeplyindebtedtotheseoutstandingeducators.--<ahref="https://engineering.dartmouth.edu/people/faculty/stephen-taylor/">StephenTaylor</a></font></p><p><small>Thispagewaslastupdatedon<strong>2023-01-05</strong>at<strong>11:31</strong>.</small></p></div></footer></body></html>
